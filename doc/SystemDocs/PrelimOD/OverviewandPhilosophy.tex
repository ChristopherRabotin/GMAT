
To solve OD problems in GMAT, a user will have to create and
configure many objects that model physical components involved in
the measurement process such as spacecraft, receivers, clocks,
transmitters and celestial objects to name a few.  A user will also
have to configure measurement models, provide truth data or define
simulation parameters, and configure numerical solvers to determine
the best state estimate. Below we discuss how the user will provide
these and other types of information to define and solve OD problems
in GMAT.  In a sense, this is an attempt to write a short user's
guide  before writing the software.  This approach is useful in
several ways: it defines how a user will interact with GMAT and
allows analysts to provide feedback on the interfaces before the
system is written, and it gives some insight into various designs
for the the underlying software architecture.

We begin this chapter with a high level view of OD from the
perspective of a user who needs to apply GMAT to orbit
determination. We provide a categorization of models and algorithms
that a user will have control over and explain the overall
philosophy of the user interface in GMAT.  The high level
categorization explains where in the GMAT script and GUI a user
would need to go to set various types of information such as
dynamics models, process noise parameters, and measurement models to
name a few.  Next, we provide a detailed view of the primary objects
and commands required for orbit determination in GMAT.  These
sections go into detail on what fields are on each objects, and what
commands would be employed for different types of analysis.

\section{Overview and Philosophy}

To uniquely define an orbit determination problem, a user must often
provide hundreds of pieces of information ranging from clock drift
parameters, process noise characteristics, spacecraft physical
properties, ground station properties, and atmospheric modelling
parameters to name just a few. This section explains how theses
pieces of information will be organized in GMAT and the philosophy
behind the organization of the data.  The goal is to provide an
intuitive interface for orbit determination analysis and explain
where a user would go to set types of data, and why the choices have
been made. 

To solve OD problems in GMAT, a user will have to create and
configure many objects that model physical components involved in
the measurement process such as spacecraft, receivers, clocks,
transmitters and celestial objects to name a few. A user will also
have to configure measurement models, provide truth data or define
simulation parameters, and configure numerical solvers to determine
the best state estimate. Below we discuss how the user will provide
these and other types of information to define and solve OD
problems. This information is useful in several ways: it defines how
a user will interact with GMAT and allows analysts to provide
feedback on the interfaces before the system is written, and it
gives some insight into how the underlying software architecture
will be organized.  We begin with a high level view and
categorization of models and algorithms that a user will have
control over.

According to our proposed approach we organize the objects and
models to perform OD into four categories:  estimators, measurement
participants, measurement models, and dynamics models.  In this
section, we discuss each of these classes of objects in more detail
and describe the philosophy and functionality for each of the four
categories.

Measurement Participants The first category of objects is
Measurement Participants which are defined as any physical object
that is part of a measurement process.  Examples include:

?   Spacecraft and sensors ?   Ground station and sensors ?
Aircraft and sensors ?   Celestial objects ?   Other

For example,  an altimeter measurement for a LEO spacecraft has two
participants: Earth and the spacecraft.  For a GPS pseudorange
measurement, the participants include the GPS constellation and the
user spacecraft.   For a two-way range measurement between a ground
station and a spacecraft, both the ground station and the spacecraft
are participants in the measurement.

In GMAT, measurement participants are created and configured
separately from measurements.  For example, if the user requires a
Doppler measurement between say Hubble and Canberra, they first
configure a spacecraft to model Hubble, and then they configure a
ground station to model Canberra.  Once the Hubble and Canberra
objects are configured, the user creates a measurement object and
configures it to create a Doppler measurement between Hubble and
Canberra.

\begin{figure}[htbp!]
    \begin{center}
    \begin{picture}(270,150)
    \special{psfile=ODObjects.eps
    hscale= 85 vscale= 85 hoffset = -130 voffset = -440}
    \end{picture}
    \end{center}
    \vspace{0.2 in}
    \label{Fig:ODObjects}
    \caption{ Objects and Commands for OD Applications }
\end{figure}

GPS Constellation Measurement Models A measurement model describes
how measurement participants interact to produce a measurement
quantity used in the OD process.  Once configured, a measurement
model provides the following information: observed measurement
values (whether they are read from a file or simulated),  the
computed (or expected) value of the measurement, and the measurement
partial derivatives.   In summary, Measurement Models provide:

?   Truth quantities ?   Observed ?   Simulated ?   Computed
(expected) quantities ?   Partial derivatives

To configure a measurement model, the measurement participants must
be created and appropriately configured.   Fields on the Measurement
Model object allow the user to define many different types of
measurements given the specified list of participants.   If observed
measurements are available from a standard file format, the user
configures the measurement Model to read data from the desired file.
In this case, the user must set object Ids on the measuement
participants to match the Ids on the measurement file.  GMAT uses
the file format and measurement Ids to determine how computed values
are to be calculated.

When observed values are not available, a user can configure a
Measurement Model to simulate the desired measurements.  In this
case, GMAT will compute both the observed and expected values for a
measurement, or by using the SimulateData command, GMAT will simply
write the requirested simulation data to a measurement file.    A
script snippet that contains a sample measurement model is shown
below.  Each field for the Measurement Model object is discussed in
detail in Table 1.  Note that for complex, such as GPS psuedorange,
there will be many more fields.  These fields are not included here.

Below is a script example of a simple measurement model.  The
participants in the measurement are ODSat and Canberra, which are
assumed to have been configured in a previous script segment.   The
measurement types are Azimuth, Elevation, and Range.  The DataSource
field allows the user to tell GMAT whether to read the observations
from a file, or to simulate the data. The FileFormat and Filename
fields allow the user to specify the observations data file if it is
available.    The fields  LightTimeModel, IonosphericModel, and
TroposphereModel,allow the user to specify the model for these error
corrections, where None is an option if the error source is to be
neglected.   All fields with the prefix field ".Sim" are for
configuration of the data simulator for this measurement.

\verbatiminput{GSMeasurement.script}
\verbatiminput{BatchLeastSquares.script}
\verbatiminput{ExtendedKalmanFilter.script}

Estimators

The third component required for an estimation problem is a solver.
The user will have many solvers to choose from including but not
limited to

?   Initial orbit determination ?   Batch (least squares, other) ?
Filters (SRIF, EKF, UKF)

In GMAT the solver is a relatively simple object compared to the
measurement model and the measurement  participants.  The job of the
solver is to query configured measurement models for the observed
and computed values  and the partial derivatives  and use this
information  to generate state estimates.  Hence,  the estimator in
GMAT knows little about the details of the measurement model
computations or the configurations of the participants.

A sample script segment for a BatchLeastSquare he user will specify
the SolveFor and Consider parameters on the estimator, along with
what measurements they would like the solver to process.

%Create BatchLeastSquares BLSE BLSI.Measurements = BLSI.Propagator =
%BLSE.SolveFor = BLSE.Consider = BLSE.SolutionEpoch =
%BLSE.AbsoluteConvergenceTol = BLSE.Propagator =
%
%Create ExtendedKalmanFilter EKF EKF.Measurements = EKF.Propagator =
%EKF.SolveFor = EKF.Consider = EKF.SolutionEpoch = EKF.Propagator =
%EKF.ProcessNoiseModel = EKF.Smoothing = Dynamics Models

Dynamics Models ?   Participant dynamics ?   Variational equations ?
Process Noise

Commands and Application Control

Application Control Modes ?   RunEstimator ?   SimulateData ?
RunEstimatorSequence
