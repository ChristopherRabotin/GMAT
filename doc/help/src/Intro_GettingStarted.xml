<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xml:id="GettingStarted"
         xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:m="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
  <title>Getting Started</title>

  <section>
    <title>Installation</title>

    <para>Installers and files for Windows are located on the GMAT SourceForge
    page at <uri>https://sourceforge.net/projects/gmat</uri>. As of this
    writing the latest version is R2012a, released May 23, 2012.</para>

    <para>The GMAT Windows distribution contains an installer that will
    install and configure GMAT for you automatically. By default GMAT will be
    installed into the application data folder in your user profile, and a
    shortcut will be placed in the <guimenu>Start</guimenu> menu.</para>

    <para>GMAT is available as a source code bundle for other platforms. See
    the <link xlink:href="http://gmat.ed-pages.com/wiki/tiki-index.php">GMAT
    Wiki</link> for compiling instructions.</para>
  </section>

  <section>
    <title>Starting and Quitting GMAT</title>

    <section>
      <title>Starting a GMAT Session</title>

      <para>On Microsoft Windows platforms there are several ways to start a
      GMAT session. If you used the GMAT installer, you can click the
      <guimenuitem>GMAT R2012a</guimenuitem> item in the
      <guimenu>Start</guimenu> menu. If you installed GMAT from a zip file or
      by compiling the system, locate the <filename>bin</filename> directory
      in the GMAT root directory and double-click
      <filename>GMAT.exe</filename>.</para>

      <para>On the Mac, use Finder to open the <filename>bin</filename> folder
      located in the GMAT root directory and open the
      <filename>GMAT</filename> application. Alternatively, open a Terminal
      window, change to your installation directory, then type the command
      <userinput>open GMAT.app</userinput>. Once GMAT is open, you can set it
      to remain in the dock by clicking its dock icon, then
      <guimenu>Options</guimenu>, then <guimenuitem>Keep in
      Dock</guimenuitem>. This allows you to open GMAT in the future simply by
      clicking its dock icon.</para>
    </section>

    <section>
      <title>Quitting a GMAT Session</title>

      <para>To end a GMAT session on Windows or Linux, in the menu bar, click
      <guimenu>File</guimenu>, then click <guimenuitem>Exit</guimenuitem>. On
      the Mac, in the menu bar, click <guilabel>GMAT</guilabel>, then click
      <guimenuitem>Quit GMAT</guimenuitem>, or type <keycombo action="simul">
          <keycap>Command</keycap>

          <keycap>Q</keycap>
        </keycombo>.</para>
    </section>
  </section>

  <section>
    <title>Running the GMAT Demos</title>

    <para>The GMAT distribution includes more than 30 sample missions. These
    samples show how to apply GMAT to problems ranging from the Hohmann
    transfer to libration point station-keeping to trajectory optimization. To
    locate and run a sample mission:</para>

    <orderedlist spacing="compact">
      <listitem>
        <para>Open GMAT.</para>
      </listitem>

      <listitem>
        <para>On the toolbar click <guiicon>Open</guiicon>.</para>
      </listitem>

      <listitem>
        <para>Navigate to the <filename>samples</filename> folder located in
        the GMAT root directory.</para>
      </listitem>

      <listitem>
        <para>Double-click a script file of your choice.</para>
      </listitem>

      <listitem>
        <para>Click <guiicon>Run</guiicon>.</para>
      </listitem>
    </orderedlist>

    <para>To run optimization missions, you will need MATLAB and the MATLAB
    Optimization Toolbox and/or the VF13ad plugin based on software in the
    Harwell Subroutine Library. These are proprietary libraries and are not
    distributed with GMAT. MATLAB connectivity is not yet fully supported in
    the Mac and Linux GMAT releases, and therefore you cannot run optimization
    missions that use MATLAB’s <function>fmincon</function> optimizer on those
    platforms.</para>
  </section>

  <section xml:id="UserInterfacesOverview">
    <title>User Interfaces Overview</title>

    <para>GMAT offers multiple ways to design and execute your mission. The
    two primary interfaces are the graphical user interface (GUI) and the
    script interface. These interfaces are interchangeable and each supports
    most of the functionality available in GMAT. When you work in the script
    interface, you are working in GMAT’s custom script language. To avoid
    issues such as circular dependencies, there are some basic rules you must
    follow. Below, we discuss these interfaces and then discuss the basic
    rules and best practices for working in each interface.</para>

    <section>
      <title>GUI Overview</title>

      <para>When you start a session, the GMAT desktop is displayed with a
      default mission already loaded. The GMAT desktop has a native look and
      feel on each platform and most desktop components are supported on all
      platforms.</para>

      <section>
        <title>Windows GUI</title>

        <para>When you open GMAT on Windows and click <guiicon>Run</guiicon>
        in the Toolbar, GMAT executes the default mission as shown in the
        figure below. The tools listed below the figure are available in the
        GMAT desktop.</para>

        <figure>
          <title>GMAT Desktop (Windows)</title>

          <screenshot>
            <info>
              <title/>
            </info>

            <mediaobject>
              <imageobject>
                <imagedata contentdepth="100%"
                           fileref="files/images/Intro_GettingStarted_WindowsGUI.png"
                           scalefit="1" width="100%"/>
              </imageobject>
            </mediaobject>
          </screenshot>
        </figure>

        <variablelist>
          <varlistentry>
            <term>Menu Bar</term>

            <listitem>
              <para>The menu bar contains <guimenu>File</guimenu>,
              <guimenu>Edit</guimenu>, <guimenu>Window</guimenu> and
              <guimenu>Help</guimenu> functionality.</para>

              <para>On Windows, the <guilabel>File</guilabel> menu contains
              standard <guilabel>Open</guilabel>, <guilabel>Save</guilabel>,
              <guilabel>Save As</guilabel>, and <guilabel>Exit</guilabel>
              functionality as well as <guilabel>Open Recent</guilabel> and
              <guilabel>New Mission</guilabel>. The <guilabel>Edit</guilabel>
              menu contains functionality for script editing when the script
              editor is active. The <guilabel>Window</guilabel> menu contains
              tools for organizing graphics windows and the script editor
              within the GMAT desktop. Examples include the ability to
              <guilabel>Tile</guilabel> windows, <guilabel>Cascade</guilabel>
              windows and <guilabel>Close</guilabel> windows. The Help menu
              contains links to <guilabel>Online Help</guilabel>,
              <guilabel>Tutorials</guilabel>, <guilabel>Forums</guilabel>, and
              the <guilabel>Report An Issue</guilabel> option links to GMAT’s
              defect reporting system, the <guilabel>Welcome Page</guilabel>,
              and a <guilabel>Provide Feedback</guilabel> link.</para>

              <para>On the Mac, menus are nearly the same, with a few
              differences: the <guilabel>File</guilabel> menu does not contain
              an <guilabel>Exit</guilabel> option - instead, the
              <guilabel>Quit GMAT</guilabel> menu option is on the GMAT menu,
              as discussed before; tiling and cascading windows are not
              supported, so those options do not appear under the
              <guilabel>Window</guilabel> menu; currently, email is not
              supported, so <guilabel>Provide Feedback</guilabel> is
              nonfunctional under the <guilabel>Help</guilabel> menu.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Toolbar</term>

            <listitem>
              <para>The toolbar provides easy access to frequently used
              controls such as file controls, <guilabel>Run</guilabel>,
              <guilabel>Pause</guilabel>, and <guilabel>Stop</guilabel> for
              mission execution, and controls for graphics animation. On
              Windows and Linux, the toolbar is located at the top of the GMAT
              window; on the Mac, it is located on the left of the GMAT frame.
              Because the toolbar is vertical on the Mac, some toolbar options
              are abbreviated.</para>

              <para>GMAT allows you to simultaneously edit the raw script file
              representation of your mission and the GUI representation of
              your mission. It is possible to make inconsistent changes in
              these mission representations. The <guilabel>GUI/Script Sync
              Status</guilabel> indicator located in the toolbar shows you the
              state of the two mission representations. See the <xref
              linkend="GuiScriptInteractionsAndSynchronization"/> section for
              further discussion.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Resources Tab</term>

            <listitem>
              <para>The <guilabel>Resources</guilabel> tab brings the
              <guilabel>Resources</guilabel> tree to the foreground of the
              desktop.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Resources Tree</term>

            <listitem>
              <para>The <guilabel>Resources</guilabel> tree displays all
              configured GMAT resources and organizes them into logical
              groups. All objects created in a GMAT script using a
              <guilabel>Create </guilabel>command are found in the
              <guilabel>Resources</guilabel> tree in the GMAT desktop.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Mission Tab</term>

            <listitem>
              <para>The <guilabel>Mission</guilabel> tab brings the Mission
              Tree to the foreground of the desktop.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Mission Tree</term>

            <listitem>
              <para>The <guilabel>Mission</guilabel> tree displays GMAT
              commands that control the time-ordered sequence of events in a
              mission. The <guilabel>Mission</guilabel> tree contains all
              script lines that occur after the
              <function>BeginMissionSequence</function> command in a GMAT
              script. You can undock the <guilabel>Mission</guilabel> tree as
              shown in the figure below by right-clicking on the
              <guilabel>Mission</guilabel> tab and dragging it into the
              graphics window. You can also follow these steps:</para>

              <orderedlist>
                <listitem>
                  <para>Click on the <guilabel>Mission</guilabel> tab to bring
                  the Mission Tree to the foreground.</para>
                </listitem>

                <listitem>
                  <para>Right-click on the <guilabel>Mission
                  Sequence</guilabel> folder in the
                  <guilabel>Mission</guilabel> tree and select
                  <guilabel>Undock Mission Tree</guilabel> in the menu.</para>
                </listitem>
              </orderedlist>

              <figure>
                <title>Undocked Mission Tree</title>

                <screenshot>
                  <mediaobject>
                    <imageobject>
                      <imagedata contentdepth="100%"
                                 fileref="files/images/Intro_GettingStarted_UndockedMissionTree.png"
                                 scalefit="1" width="100%"/>
                    </imageobject>
                  </mediaobject>
                </screenshot>
              </figure>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Output Tab</term>

            <listitem>
              <para>The <guilabel>Output</guilabel> tab brings the Output Tree
              to the foreground of the desktop.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Output Tree</term>

            <listitem>
              <para>The <guilabel>Output</guilabel> tree contains GMAT output
              such as report files and graphical displays.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Message Window</term>

            <listitem>
              <para>When you run a mission in GMAT, information including
              warnings, errors, and progress are written to the message
              window. For example, if there is a syntax error in a script
              file, a detailed error message is written to the message
              window.</para>
            </listitem>
          </varlistentry>

          <varlistentry>
            <term>Status Bar</term>

            <listitem>
              <para>The status bar contains various informational messages
              about the state of the GUI. When a mission is running, a
              <guilabel>Busy</guilabel> indicator will appear in the left
              pane. The center pane displays the latitude and logitude of the
              mouse cursor as it moves over a ground track window.</para>
            </listitem>
          </varlistentry>
        </variablelist>
      </section>
    </section>

    <section>
      <title>Script Interface Overview</title>

      <para>The GMAT script editor is a textual interface that lets you
      directly edit your mission in GMAT's built-in scripting language. In
      <xref linkend="Fig_ScriptEditor"/> below, the script editor is shown
      maximized in the GMAT desktop and the items relevant to script editing
      are labeled.</para>

      <figure xml:id="Fig_ScriptEditor">
        <title>GMAT Script Editor</title>

        <screenshot>
          <info>
            <title/>
          </info>

          <mediaobject>
            <imageobject>
              <imagedata contentdepth="100%"
                         fileref="files/images/Intro_GettingStarted_ScriptEditor.png"
                         scalefit="1" width="100%"/>
            </imageobject>
          </mediaobject>
        </screenshot>
      </figure>

      <variablelist>
        <varlistentry>
          <term>Scripts Folder</term>

          <listitem>
            <para>The GMAT desktop allows you to have multiple script files
            open simultaneously. Open script files are displayed in the
            <guilabel>Scripts</guilabel> folder in the
            <guilabel>Resources</guilabel> tree. Double click on a script in
            the <guilabel>Scripts</guilabel> folder to open it in the script
            editor. The GMAT desktop displays each script in a separate script
            editor. GMAT indicates the script currently represented in the GUI
            with a boldface name. Only one script can be loaded into the GUI
            at a time.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Script Status Box</term>

          <listitem>
            <para>The <guilabel>Script Status</guilabel> box indicates whether
            or not the script being edited is loaded in the GUI. The box says
            <guilabel>Active Script</guilabel> for the script currently
            represented in the GUI and <guilabel>Inactive Script</guilabel>
            for all others.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Save,Sync Button</term>

          <listitem>
            <para>The <guilabel>Save,Sync</guilabel> button saves any script
            file changes to disk, makes the script active, and synchronizes
            the GUI with the script.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Save,Sync,Run Button</term>

          <listitem>
            <para>The <guilabel>Save,Sync,Run</guilabel> button saves any
            script file changes to disk, makes the script active, synchronizes
            the GUI with the script, and executes the script.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Save As Button</term>

          <listitem>
            <para>When you click <guilabel>Save As</guilabel>, GMAT displays
            the <guilabel>Choose A File</guilabel> dialog box and allows you
            to save the script using a new file name. After saving, GMAT loads
            the script into the GUI, making the new file the active
            script.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Close</term>

          <listitem>
            <para>The <guilabel>Close</guilabel> button closes the script
            editor.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>

    <section>
      <title>GUI/Script Interface Interactions and Rules</title>

      <para>The GMAT desktop supports both a script interface and a GUI
      interface and these interfaces are designed to be consistent with each
      other. You can think of the script and GUI as different "views" of the
      same data: the resources and the mission command sequence. GMAT allows
      you to switch between views (script and GUI) and have the same view open
      in an editable state simultaneously. Below we describe the behavior,
      interactions, and rules of the script and GUI interfaces so you can
      avoid confusion and potential loss of data.</para>

      <section xml:id="GuiScriptInteractionsAndSynchronization">
        <title>GUI/Script Interactions and Synchronization</title>

        <para>GMAT allows you to simultaneously edit both the script file
        representation and the GUI representation of your mission. It is
        possible to make inconsistent changes in these representations. The
        <guilabel>GUI/Script Sync Status</guilabel> window located in the
        toolbar indicates the state of the two representations. On the Mac,
        the status is indicated in abbreviated form in the left-hand toolbar.
        <guilabel>Synchronized</guilabel> (green) indicates that the script
        and GUI contain the same information. <guilabel>GUI
        Modified</guilabel> (yellow) indicates that there are changes in the
        GUI that have not been saved to the script. <guilabel>Script
        Modified</guilabel> (yellow) indicates that there are changes in the
        script that have not been loaded into the GUI.
        <guilabel>Unsynchronized</guilabel> (red) indicates that there are
        changes in both the script and the GUI.</para>

        <caution>
          <para>GMAT will not attempt to merge or resolve simultaneous changes
          in the Script and GUI and you must choose which representation to
          save if you have made changes in both interfaces.</para>
        </caution>

        <para>The <guiicon>Save</guiicon> button in the toolbar saves the GUI
        representation over the script. The <guibutton>Save,Sync</guibutton>
        button on the script editor saves the script representation and loads
        it into the GUI.</para>
      </section>

      <section>
        <title>How the GUI Maps to a Script</title>

        <para>Clicking the <guilabel>Save</guilabel> button in the toolbar
        saves the GUI representation to the script file; this is the same file
        you edit when working in the script editor. GUI items that appear in
        the <guilabel>Resources</guilabel> tree appear before the
        <function>BeginMissionSequence</function> command in a script file and
        are written in a predefined order. GUI items that appear in the
        Mission Tree appear after the
        <function>BeginMissionSequence</function> command in a script file in
        the same order as they appear in the GUI.</para>

        <caution>
          <para>If you have a script file that has custom formatting such as
          spacing and data organization, you should work exclusively in the
          script. If you load your script into the GUI, then click
          <guilabel>Save</guilabel> in the toolbar, you will lose the
          formatting of your script. (You will not, however, lose the
          data.)</para>
        </caution>
      </section>

      <section>
        <title>How the Script Maps to the GUI</title>

        <para>Clicking the <guilabel>Save,Sync</guilabel> button on the script
        editor saves the script representation and loads it into the GUI. When
        you work in a GMAT script, you work in the raw file that GMAT reads
        and writes. Each script file must contain a command called
        <function>BeginMissionSequence</function>. Script lines that appear
        before the <function>BeginMissionSequence</function> command create
        and configure models and this data will appear in the
        <guilabel>Resources</guilabel> tree in the GUI. Script lines that
        appear after the <function>BeginMissionSequence</function> command
        define your mission sequence and appear in the
        <guilabel>Mission</guilabel> tree in the GUI. Here is a brief script
        example to illustrate:</para>

        <programlisting>Create Spacecraft Sat
Sat.X = 3000
BeginMissionSequence
Sat.X = 1000</programlisting>

        <para>The line <code>Sat.X = 3000</code> sets the x-component of the
        Cartesian state to 3000; this value will appear on the
        <guilabel>Orbit</guilabel> tab of the <guilabel>Spacecraft</guilabel>
        dialog box. However, because the line <code>Sat.X = 1000</code>
        appears after the <function>BeginMissionSequence</function> command,
        the line <code>Sat.X = 1000</code> will appear as an assignment
        command in the <guilabel>Mission</guilabel> tree in the GUI.</para>
      </section>

      <section>
        <title>Basic Script Syntax Rules</title>

        <itemizedlist>
          <listitem>
            <para>Each script file must contain one and only one
            <function>BeginMissionSequence</function> command.</para>
          </listitem>

          <listitem>
            <para>GMAT commands are not allowed before the
            <function>BeginMissionSequence</function> command.</para>
          </listitem>

          <listitem>
            <para>You cannot use inline math statements (equations) before the
            <function>BeginMissionSequence</function> command in a script
            file. (GMAT considers in-line math statements to be an assignment
            command. You cannot use equations in the
            <guilabel>Resources</guilabel> tree, so you also cannot use
            equations before the <function>BeginMissionSequence</function>
            command.)</para>
          </listitem>

          <listitem>
            <para>In the GUI, you can only use in-line math statements in an
            assignment command. So, you cannot type <userinput>3000 +
            4000</userinput> or <userinput>Sat.Y - 8</userinput> in the text
            box for setting a spacecraft’s dry mass.</para>
          </listitem>

          <listitem>
            <para>GMAT’s script language is case-sensitive.</para>
          </listitem>
        </itemizedlist>
      </section>
    </section>
  </section>

  <section version="5.0" xml:id="DataAndConfiguration">
    <title>Data and Configuration</title>

    <para>Below we discuss the files and data that are distributed with GMAT
    and are required for GMAT execution. GMAT uses many types of data files,
    including planetary ephemeris files, Earth orientation data, leap second
    files, and gravity coefficient files. This section describes how these
    files are organized and the controls provided to customize them.</para>

    <section>
      <title>File Structure</title>

      <para>The default directory structure for GMAT is broken into eight main
      subdirectories, as shown in <xref
      linkend="GmatRootDirectoryStructure"/>. These directories organize the
      files and data used to run GMAT, including binary libraries, data files,
      texture maps, and 3D models. The only two files in the GMAT root
      directory are <filename>License.txt</filename>, which contains the text
      of the Apache License 2.0, and <filename>README.txt</filename>,
      which contains user information for the current GMAT release. A summary
      of the contents of each subdirectory is provided in the sections
      below.</para>

      <figure xml:id="GmatRootDirectoryStructure">
        <title>GMAT Root Directory Structure</title>

        <screenshot>
          <info>
            <title/>
          </info>

          <mediaobject>
            <imageobject>
              <imagedata align="center" contentdepth="100%"
                         fileref="files/images/Util_DirectoryStructure.png"
                         scalefit="1" width="100%"/>
            </imageobject>
          </mediaobject>
        </screenshot>
      </figure>

      <section>
        <title><filename>bin</filename></title>

        <para>The <filename>bin</filename> directory contains all binary files
        required for the core functionality of GMAT. These libraries include
        the executable file (<filename>GMAT.exe</filename> on Windows,
        <filename>GMAT.app</filename> on the Mac, and
        <filename>GMAT</filename> on Linux) and platform-specific support
        libraries. The <filename>bin</filename> directory also contains two
        text files: <filename>gmat_startup_file.txt</filename> and
        <filename>gmat.ini</filename>. The startup file is discussed in detail
        in a separate section below. The <filename>gmat.ini</filename> file is
        used to configure some GUI panels, set paths to external web links,
        and define GUI tooltip messages.</para>
      </section>

      <section>
        <title><filename>data</filename></title>

        <para>The <filename>data</filename> directory contains all required
        data files to run GMAT and is organized according to data type, as
        shown in <xref linkend="GmatDataDirectoryStructure"/> and described
        below.</para>

        <figure xml:id="GmatDataDirectoryStructure">
          <title>GMAT Data Directory Structure</title>

          <screenshot>
            <info>
              <title/>
            </info>

            <mediaobject>
              <imageobject>
                <imagedata align="center" contentdepth="100%"
                           fileref="files/images/Util_DirectoryStructure_Data.png"
                           scalefit="1" width="100%"/>
              </imageobject>
            </mediaobject>
          </screenshot>
        </figure>

        <para>The <filename>graphics</filename> directory contains data files
        for GMAT’s visualization utilities, as well as application icons and
        images. The <filename>splash</filename> directory contains the GMAT
        splash screen that is displayed briefly while GMAT is initializing.
        The <filename>stars</filename> directory contains a star catalogue
        used for displaying stars in 3D graphics. The texture folder contains
        texture maps used for the 2D and 3D graphics resources. The
        <filename>icons</filename> directory contains graphics files for icons
        and images loaded at run time, such as the GMAT logo and GUI
        icons.</para>

        <para>The <filename>gravity</filename> directory contains gravity
        coefficient files for each body with a default non-spherical gravity
        model. Within each directory, the coefficient files are named
        according to the model they represent, and use the extension
        <filename>.cof</filename>.</para>

        <para>The <filename>gui_config</filename> directory contains files for
        configuring some of the GUI dialog boxes for GMAT resources and
        commands. These files allow you to easily create a GUI panel for a
        user-provided plugin, and are also used by some of the built-in GUI
        panels.</para>

        <para>The <filename>planetary_coeff</filename> directory contains the
        Earth orientation parameters (EOP) provided by the International Earth
        Rotation Service (IERS) and nutation coefficients for different
        nutation theories.</para>

        <para>The <filename>planetary_ephem</filename> directory contains
        planetary ephemeris data in both DE and SPK formats. The
        <filename>de</filename> directory contains the binary digital
        ephemeris DE405 files for the 8 planets, the Moon, and Pluto developed
        and distributed by JPL. The <filename>spk</filename> directory
        contains the DE421 SPICE kernel and kernels for selected comets,
        asteroids and moons. All ephemeris files distributed with GMAT are in
        the little-endian format.</para>

        <para>The <filename>time</filename> directory contains the JPL leap
        second kernel <filename>naif0010.tls</filename> and the GMAT leap
        second file <filename>tai-utc.dat</filename>.</para>

        <para>The <filename>vehicle</filename> directory contains ephemeris
        data and 3D models for selected spacecraft. The
        <filename>ephem</filename> directory contains SPK ephemeris files,
        including orbit, attitude, frame, and time kernels. The
        <filename>models</filename> directory contains 3D model files in 3DS
        or POV format for use by GMAT’s <classname>OrbitView</classname>
        visualization resource.</para>
      </section>

      <section>
        <title><filename>docs</filename></title>

        <para>The <filename>docs</filename> directory contains end-user
        documentation, including PDF versions of the Mathematical
        Specification, Architectural Specification, and Estimation
        Specification. The GMAT User’s Guide is available in the
        <filename>help</filename> directory in PDF and HTML formats, and as a
        Windows HTML Help file.</para>
      </section>

      <section>
        <title><filename>extras</filename></title>

        <para>The <filename>extras</filename> directory contains various extra
        convenience files that are helpful for working with GMAT but aren't
        part of the core codebase. The only file here so far is a syntax
        coloring file for the GMAT scripting language in the Notepad++ text
        editor.</para>
      </section>

      <section>
        <title><filename>matlab</filename></title>

        <para>The <filename>matlab</filename> directory contains M-files
        required for GMAT’s MATLAB interfaces, including the interface to the
        fmincon optimizer and interfaces for driving GMAT from MATLAB. All
        files in the <filename>matlab</filename> directory and its
        subdirectories must be included in your MATLAB path for the MATLAB
        interfaces to function properly.</para>
      </section>

      <section>
        <title><filename>output</filename></title>

        <para>The <filename>output</filename> directory is the default
        location for file output such as ephemeris files and report files. If
        no path information is provided for reports or ephemeris files created
        during a GMAT session, then those files will be written to the output
        folder.</para>
      </section>

      <section>
        <title><filename>plugins</filename></title>

        <para>The <filename>plugins</filename> directory contains optional
        plugins that are not required for use of GMAT. The
        <filename>proprietary</filename> directory is used for for third-party
        libraries that cannot be distributed freely and is an empty folder in
        the open source distribution.</para>
      </section>

      <section>
        <title><filename>samples</filename></title>

        <para>The <filename>samples</filename> directory contains over 30
        sample missions, ranging from a Hohmann transfer to libration point
        station-keeping to Mars B-plane targeting. These files are intended to
        demonstrate GMAT’s capabilities and to provide you with a potential
        starting point for building common mission types for your application
        and flight regime. Samples with specific requirements are located in
        subdirectories such as <filename>NeedMatlab</filename> and
        <filename>NeedVF13ad</filename>.</para>
      </section>

      <section>
        <title><filename>userfunctions</filename></title>

        <para>The <filename>userfunctions</filename> directory contains GMAT
        and MATLAB functions that are included in the GMAT distribution. You
        can also store your own custom GMAT and MATLAB functions in these
        folders.</para>
      </section>
    </section>

    <section>
      <title>Configuring GMAT Data Files</title>

      <para>You can configure the data files GMAT loads at run time by editing
      the <filename>gmat_startup_file.txt</filename> file located in the
      <filename>bin</filename> directory. The startup file contains path
      information for data files such as ephemeris, Earth orientation
      parameters and graphics files. By editing the startup file, you can
      customize which files are loaded and used during a GMAT session. Below
      we describe the customization features available in the startup file.
      The order of lines in the startup file does not matter.</para>

      <section>
        <title>Leap Second and EOP files</title>

        <para>GMAT reads several files that are used for high fidelity
        modelling of time and coordinate systems: the leap second files and
        the Earth orientation parameters (EOP) provided by the IERS. The EOP
        file is updated daily by the IERS. To update your local file with the
        latest data, simply replace the file
        <filename>eopc04_08.62-now</filename> in the
        <filename>data/planetary_coeff</filename> directory. Updated versions
        of this file are available from the <link
        xlink:href="http://data.iers.org/products/213/14444/orig/eopc04_08.62-now">IERS</link>.</para>

        <para>There are two leap second files provided with GMAT in the
        <filename>data/time</filename> directory. The
        <filename>naif0010.tls</filename> file is used by the JPL SPICE
        libraries when computing ephemerides. When a new leap second is added,
        you can replace this file with the new file from <link
        xlink:href="ftp://naif.jpl.nasa.gov/pub/naif/generic_kernels/lsk/">NAIF</link>.
        GMAT reads the<filename> tai-utc.dat</filename> file for all time
        computations requiring leap seconds that are not performed by the
        SPICE utilities. When a new leap second is added, you can replace this
        file with the new file from the <link
        xlink:href="ftp://maia.usno.navy.mil/ser7/tai-utc.dat">US Naval
        Observatory</link>. In addtion, you can modify the file if a new leap
        second is added by simply duplicating the last row and updating it
        with the correct information for the new leap second. For example, if
        a new leapsecond were added on 01 Jul 2013, you would add the
        following line to the bottom of
        <filename>tai-utc.dat</filename>:</para>

        <programlisting>2013 JUL 1 =JD 2456474.5 TAI-UTC= 35.0 S + (MJD - 41317.) X 0.0</programlisting>
      </section>

      <section>
        <title>Loading Custom Plugins</title>

        <para>Custom plugins are loaded by adding a line to the startup file
        (<filename>bin/gmat_startup_file.txt</filename>) specifying the name
        and location of the plugin file. In order for a plugin to work with
        GMAT, the plugin library must be placed in the folder referenced in
        the startup file. You specify the path to a plugin file using the
        "PLUGIN" keyword and specify the file by providing its name without
        the file extension (.dll on Windows). For example, to load a Windows
        plugin named <filename>libVF13Optimizer.dll</filename> located in the
        <filename>plugins/proprietary</filename> directory, you would add this
        line to your startup file:</para>

        <programlisting>PLUGIN = ../plugins/proprietary/libVF13Optimizer</programlisting>
      </section>

      <section>
        <title>User-defined Function Paths</title>

        <para>If you create custom GMAT or MATLAB functions, you can provide
        the path to those files and GMAT will locate them at run time. The
        default startup file is configured so you can place GMAT function
        files (with a <filename>.gmf</filename> extension) in the
        <filename>userfunctions/gmat</filename> directory and place MATLAB
        functions (with a <filename>.m</filename> extension) in the
        <filename>userfunctions/matlab</filename> directory. GMAT
        automatically searches those locations at run time. You can change the
        location of the search path to your GMAT or MATLAB functions by
        changing these lines in your startup file to reflect the location of
        your files with respect to the GMAT <filename>bin</filename>
        folder:</para>

        <programlisting>GMAT_FUNCTION_PATH = ../userfunctions/gmat
MATLAB_FUNCTION_PATH = ../userfunctions/matlab</programlisting>

        <para>If you wish to organize your custom functions in multiple
        folders, you can add multiple search paths to the startup file. For
        example,</para>

        <programlisting>GMAT_FUNCTION_PATH = ../MyFunctions/utils
GMAT_FUNCTION_PATH = ../MyFunctions/StateConversion 
GMAT_FUNCTION_PATH = ../MyFunctions/TimeConversion</programlisting>

        <para>GMAT will search the paths in the order specified in the startup
        file and will use the first function with a matching name.</para>
      </section>
    </section>

    <section>
      <title>Configuring the MATLAB Interface</title>

      <para>GMAT features a MATLAB interface that allows you to run MATLAB
      functions from within GMAT.</para>

      <para>This interface is packaged as an optional GMAT plugin. To use it,
      make sure the following line is present in your
      <filename>gmat_startup_file.txt</filename> and has no comment symbol
      (<code>#</code>) in front of it.</para>

      <programlisting>PLUGIN = ../plugins/libMatlabInterface</programlisting>

      <para>The MATLAB interface must be able to find your MATLAB
      installation. The procedure for setting this information varies by
      platform.</para>

      <section>
        <title>Windows</title>

        <para>On Windows, MATLAB must be properly configured in two places:
        the system <envar>Path</envar> variable and the Windows registry. Both
        locations must be configured for the same MATLAB version.</para>

        <orderedlist>
          <listitem>
            <para>The following directories must exist in your system’s
            <envar>Path</envar> variable, where
            <filename><replaceable>&lt;MATLAB&gt;</replaceable></filename> is
            the path to the MATLAB root directory:</para>

            <programlisting><replaceable>&lt;MATLAB&gt;</replaceable>/bin/win32
<replaceable>&lt;MATLAB&gt;</replaceable>/bin</programlisting>

            <para>If you have multiple versions of MATLAB installed, GMAT will
            use the one that appears first in the system path.</para>

            <caution>
              <para>For some versions of MATLAB (e.g. R2010a), MATLAB and
              Windows are distributed with libraries that have the same name,
              resulting in a conflict. As a workaround, you may need to place
              the folders above at the beginning of your system path.</para>
            </caution>

            <!--Blank paragraph to add space between these list items; shouldn't be necessary-->

            <para/>
          </listitem>

          <listitem>
            <para>When you install MATLAB, it automatically registers itself
            as a COM server in the Windows registry. If you have mulple
            versions of MATLAB installed, it may be necessary to re-register a
            certain version manually. This can be done by running the
            following command. This may require administrator
            privileges.</para>

            <programlisting>matlab.exe -regserver</programlisting>

            <!--Blank paragraph to add space between these list items; shouldn't be necessary-->

            <para/>
          </listitem>

          <listitem>
            <para>Add GMAT’s MATLAB files to your MATLAB path. This can be
            done by placing the following line in a file named
            <filename>startup.m</filename> in your user MATLAB directory,
            where <code><replaceable>&lt;GMAT&gt;</replaceable></code> is the
            path to your GMAT root directory.</para>

            <programlisting>addpath(genpath('<replaceable>&lt;GMAT&gt;</replaceable>/matlab'));</programlisting>
          </listitem>
        </orderedlist>
      </section>

      <section>
        <title>Mac OS X</title>

        <para>On Mac OS X, to use MATLAB with GMAT, you must set the
        <envar>MATLABFORGMAT</envar> environment variable in your
        <filename>environment.plist</filename> file, located in the
        <filename>.MacOSX</filename> directory in your home folder. This
        environment variable should point to the location of your MATLAB
        installation (application bundle). GMAT will not interface with MATLAB
        unless this environment variable is set.</para>

        <para>The current Mac application includes the ability to make calls
        to MATLAB functions from within GMAT, but does not support calls
        MATLAB to GMAT (including the <function>fmincon</function>
        optimizer).</para>

        <para>Note that when GMAT opens MATLAB, it will open X11 first (as is
        required for MATLAB execution). GMAT currently does not automatically
        close X11 after quitting MATLAB, so you will need to quit X11
        manually.</para>

        <para>To add the environment variable:</para>

        <procedure>
          <step>
            <para>If the <filename>environment.plist</filename> file already
            exists in your <filename>.MacOSX</filename> directory, edit the
            file using the Property List Editor to add the
            <filename>MATLABFORGMAT</filename> variable and set it to point to
            the location of your MATLAB application (e.g.
            <filename>/Applications/MATLAB_R2010a/MATLAB_R2010a.app</filename>).</para>
          </step>

          <step>
            <para>If you do not have an <filename>environment.plist</filename>
            file in your <filename>.MacOSX</filename> directory, open a
            Terminal window and follow these steps:</para>

            <procedure>
              <step>
                <para>Create the <filename>.MacOSX</filename> directory as a
                directory in your home folder (if it does not exist).</para>
              </step>

              <step>
                <para>Open the Property List Editor and create the
                <envar>MATLABFORGMAT</envar> variable as described
                above.</para>
              </step>

              <step>
                <para>Save the property list as
                <filename>environment.plist</filename> in the
                <filename>.MacOSX</filename> directory.</para>
              </step>
            </procedure>
          </step>
        </procedure>

        <para>You must logout and log back in for this to take effect.</para>
      </section>
    </section>
  </section>

  <section version="5.0">
    <title>Other Resources</title>

    <para>If you have further questions, need help with using GMAT, or want to
    provide feedback, here are some additional resources:</para>

    <itemizedlist>
      <listitem>
        <para>Official Homepage: <uri>http://gmat.gsfc.nasa.gov</uri></para>
      </listitem>

      <listitem>
        <para>User Forum: <uri>http://gmat.ed-pages.com/forum</uri></para>
      </listitem>

      <listitem>
        <para>Wiki: <uri>http://gmat.ed-pages.com/wiki</uri></para>
      </listitem>

      <listitem>
        <para>Mailing Lists and Project Resources:
        <uri>http://sourceforge.net/projects/gmat</uri></para>
      </listitem>

      <listitem>
        <para>Blog: <uri>http://gmat.sourceforge.net/blog</uri></para>
      </listitem>

      <listitem>
        <para>Documentation:
        <uri>http://gmat.sourceforge.net/docs</uri></para>
      </listitem>

      <listitem>
        <para>Bug Tracker:
        <uri>http://li64-187.members.linode.com:8080</uri></para>
      </listitem>

      <listitem>
        <para>Official Contact: <email>gmat@gsfc.nasa.gov</email></para>
      </listitem>
    </itemizedlist>
  </section>
</chapter>
