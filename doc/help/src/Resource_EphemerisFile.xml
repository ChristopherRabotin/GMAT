<?xml version="1.0" encoding="UTF-8"?>
<refentry version="5.0" xml:id="EphemerisFile"
          xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:xi="http://www.w3.org/2001/XInclude"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:m="http://www.w3.org/1998/Math/MathML"
          xmlns:html="http://www.w3.org/1999/xhtml"
          xmlns:db="http://docbook.org/ns/docbook">
  <indexterm>
    <primary>EphemerisFile</primary>
  </indexterm>

  <refmeta>
    <refentrytitle>EphemerisFile</refentrytitle>

    <refmiscinfo class="source">GMAT</refmiscinfo>

    <refmiscinfo class="manual">Resources</refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>EphemerisFile</refname>

    <refpurpose>Generate spacecraft’s ephemeris data</refpurpose>
  </refnamediv>

  <refsection>
    <title>Description</title>

    <para><guilabel>EphemerisFile</guilabel> is a user-defined resource that
    generates spacecraft’s ephemeris data in a report format. You can generate
    spacecraft’s ephemeris data in any of the user-defined coordinate frames.
    GMAT allows you to output ephemeris data in either CCSDS or SPK file
    formats. See the <xref linkend="EphemerisFile_Remarks"
    xrefstyle="select:title"/> section for more details.
    <guilabel>EphemerisFile</guilabel> resource can be configured to generate
    ephemeris data at default integration steps or by entering user-selected
    step sizes.</para>

    <para>GMAT allows you to generate any number of ephemeris data files by
    creating multiple <guilabel>EphermisFile</guilabel> resources.
    Spacecraft’s ephemeris data is always provided in UTC epoch format. An
    <guilabel>EphemerisFile</guilabel> resource can be created using either
    the GUI or script interface. GMAT also provides the option of when to
    write and stop writing ephemeris data to a text file through the
    <guilabel>Toggle</guilabel>
    <guilabel>On</guilabel>/<guilabel>Off</guilabel> commands. See the <xref
    linkend="EphemerisFile_Remarks" xrefstyle="select:title"/> section below
    for detailed discussion of the interaction between
    <guilabel>EphemerisFile</guilabel> resource and
    <guilabel>Toggle</guilabel> command.</para>

    <para><phrase role="ref_seealso">See Also</phrase>: <xref
    linkend="CoordinateSystem"/>, <xref linkend="Toggle"/></para>
  </refsection>

  <refsection>
    <title>Fields</title>

    <informaltable colsep="0" frame="topbot">
      <tgroup cols="2">
        <colspec colnum="1" colwidth="1*"/>

        <colspec colnum="2" colwidth="3*"/>

        <thead>
          <row>
            <entry>Field</entry>

            <entry>Description</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry>
              <guilabel>CoordinateSystem</guilabel>
            </entry>

            <entry>
              <para>Allows you to set the interpolation order for the
              available interpolator methods (<guilabel>Lagrange</guilabel> or
              <guilabel>Hermite</guilabel>) for either
              <guilabel>CCSDS-OEM</guilabel>, <guilabel>SPK</guilabel> or
              <guilabel>Code 500</guilabel> file formats. This field cannot be
              modified in the Mission Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>For CCSDS-OEM and Code-500 file formats: 1 &lt;=
                    Integer Number &lt;= 10. For SPK file format: 1 &lt;= Odd
                    Integer Number &lt;= 9</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set, get</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>EarthMJ2000Eq</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>EpochFormat</guilabel>
            </entry>

            <entry>
              <para>The ephemeris file is generated at the step size that is
              specified for <guilabel>StepSize</guilabel> field. The user can
              generate ephemeris file at default Integration step size (using
              raw integrator steps) or by defining a fixed step size provided
              by user. For Code-500 ephemeris, only fixed step size is
              supported This field cannot be modified in the Mission
              Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Enumeration</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para><guilabel>UTCGregorian</guilabel>,<guilabel>
                    UTCModJulian</guilabel>,<guilabel>
                    TAIGregorian</guilabel>,<guilabel>
                    TAIModJulian</guilabel>,<guilabel>
                    TTGregorian</guilabel>,<guilabel>
                    TTModJulian</guilabel>,<guilabel> A1Gregorian</guilabel>,
                    <guilabel>A1ModJulian</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>Set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>UTCGregorian</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>FileFormat</guilabel>
            </entry>

            <entry>
              <para>Allows the user to generate ephemeris file in two
              available file formats: CCSDS-OEM or SPK. This field cannot be
              modified in the Mission Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Enumeration</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para><guilabel>CCSDS-OEM</guilabel>,
                    <guilabel>SPK</guilabel>,
                    <guilabel>Code-500</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>Set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>CCSDS-OEM</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>FileName</guilabel>
            </entry>

            <entry>
              <para>Allows the user to generate ephemeris file in three
              available file formats: CCSDS-OEM, SPK and Code-500. This field
              cannot be modified in the Mission Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Valid File Path and Name</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <literal>EphemerisFile1.eph</literal>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>FinalEpoch</guilabel>
            </entry>

            <entry>
              <para>Allows the user to specify the time span of an ephemeris
              file. Ephemeris file is generated up to final epoch that is
              specified in <guilabel>FinalEpoch</guilabel> field. This field
              cannot be modified in the Mission Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>user-defined final epoch or Default Value</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <literal>FinalSpacecraftEpoch</literal>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>InitialEpoch</guilabel>
            </entry>

            <entry>
              <para>Allows the user to specify the starting epoch of the
              ephemeris file. Ephemeris file is generated starting from the
              epoch that is defined in <guilabel>InitialEpoch</guilabel>
              field. This field cannot be modified in the Mission
              Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>user-defined initial epoch or Default Value</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <literal>InitialSpacecraftEpoch</literal>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>InterpolationOrder</guilabel>
            </entry>

            <entry>
              <para>Allows you to set the interpolation order for the
              available interpolator methods (<guilabel>Lagrange</guilabel> or
              <guilabel>Hermite</guilabel>) for either
              <guilabel>CCSDS-OEM</guilabel> or <guilabel>SPK</guilabel> file
              formats. This field cannot be modified in the Mission
              Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Integer</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>1 &lt;= Integer Number &lt;= 10</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>Set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>7</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>Interpolator</guilabel>
            </entry>

            <entry>
              <para>This field defines the available interpolator method that
              was used to generate ephemeris file. Available
              <guilabel>Interpolators</guilabel> are
              <guilabel>Lagrange</guilabel> or <guilabel>Hermite</guilabel>.
              This field cannot be modified in the Mission Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para><guilabel>Lagrange</guilabel> for CCSDS-OEM and
                    Code-500 files, <guilabel>Hermite</guilabel> for SPK
                    file</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>Lagrange</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>Maximized</guilabel>
            </entry>

            <entry>
              <para>Allows the user to maximize the generated ephemeris file
              window. This field cannot be modified in the Mission
              Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Boolean</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>true,false</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>false</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>OutputFormat</guilabel>
            </entry>

            <entry>
              <para>Allows the user to specify what type of format they want
              GSFC Code-500 ephmeris to be generated in. GSFC Code-500
              ephemeris can be generated in the PC or UNIX version. This field
              cannot be modified in the Mission Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para><guilabel>PC</guilabel>,
                    <guilabel>UNIX</guilabel></para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>Set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>PC</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>RelativeZOrder</guilabel>
            </entry>

            <entry>
              <para>Allows the user to select which generated ephemeris file
              display window is to displayed first on the screen. The
              <guilabel>EphemerisFile</guilabel> resource with lowest
              <guilabel>RelativeZOrder</guilabel> value will be displayed last
              while <guilabel>EphemerisFile</guilabel> resource with highest
              <guilabel>RelativeZOrder</guilabel> value will be displayed
              first. This field cannot be modified in the Mission
              Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Integer</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Integer ≥ 0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>0</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>Size</guilabel>
            </entry>

            <entry>
              <para>Allows the user to control the display size of generated
              ephemeris file panel. First value in [0 0] matrix controls
              horizonal size and second value controls vertical size of
              ephemeris file display window. This field cannot be modified in
              the Mission Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Any Real number</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>[ 0 0 ]</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>Spacecraft</guilabel>
            </entry>

            <entry>
              <para>Allows the user to generate ephemeris data of
              spacecraft(s) that are defined in
              <guilabel>Spacecraft</guilabel> field. This field cannot be
              modified in the Mission Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>String</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Default spacecraft or any number of user-defined
                    spacecrafts or formations</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set, get</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <guilabel>DefaultSC</guilabel>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>StepSize</guilabel>
            </entry>

            <entry>
              <para>The ephemeris file is generated at the step size that is
              specified for <guilabel>StepSize</guilabel> field. The user can
              generate ephemeris file at default Integration step size (using
              raw integrator steps) or by defining a fixed step size provided
              by user. This field cannot be modified in the Mission
              Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Real Number &gt; 0.0 or equals Default Value</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>Set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>
                      <literal>IntegratorSteps</literal>
                    </para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>UpperLeft</guilabel>
            </entry>

            <entry>
              <para>Allows the user to pan the generated ephemeris file
              display window in any direction. First value in [0 0] matrix
              helps to pan the window horizontally and second value helps to
              pan the window vertically. This field cannot be modified in the
              Mission Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Real array</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>Any Real number</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>[ 0 0 ]</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>N/A</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>WriteEphemeris</guilabel>
            </entry>

            <entry>
              <para>Allows the user to optionally calculate/write or not
              calculate/write an ephemeris that has been created and
              configured. This field cannot be modified in the Mission
              Sequence.</para>

              <variablelist>
                <varlistentry>
                  <term>Data Type</term>

                  <listitem>
                    <para>Boolean</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Allowed Values</term>

                  <listitem>
                    <para>true,false</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Access</term>

                  <listitem>
                    <para>set</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Default Value</term>

                  <listitem>
                    <para>true</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Units</term>

                  <listitem>
                    <para>Unit</para>
                  </listitem>
                </varlistentry>

                <varlistentry>
                  <term>Interfaces</term>

                  <listitem>
                    <para>GUI, script</para>
                  </listitem>
                </varlistentry>
              </variablelist>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>
  </refsection>

  <refsection>
    <title>GUI</title>

    <para>The figure below shows the default settings for the
    <guilabel>EphemerisFile</guilabel> resource:</para>

    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata align="center" contentdepth="100%"
                     fileref="files/images/Resource_EphemeriesFile_GUI_3.png"
                     scalefit="1" width="100%"/>
        </imageobject>
      </mediaobject>
    </screenshot>

    <para>GMAT allows you to modify <guilabel>InitialEpoch</guilabel>,
    <guilabel>FinalEpoch</guilabel> and <guilabel>StepSize</guilabel> fields
    of <guilabel>EphemerisFile</guilabel> resource. Instead of always
    generating the ephemeris file at default time span settings of
    <guilabel>InitialSpacecraftEpoch</guilabel> and
    <guilabel>FinalSpacecraftEpoch</guilabel>, you can define your own initial
    and final epochs. Similarly, instead of using the default
    <guilabel>IntegratorSteps</guilabel> setting for
    <guilabel>StepSize</guilabel> field, you can generate the ephemeris file
    at the step size of your choice.</para>

    <para>The GUI figure below shows ephemeris file which will be generated
    from initial epoch of 01 Jan 2000 14:00:00.000 to final epoch of 01 Jan
    2000 20:00:00.000 while using non-default step size of 300 seconds:</para>

    <screenshot>
      <mediaobject>
        <imageobject>
          <imagedata align="center" contentdepth="100%"
                     fileref="files/images/Resource_EphemeriesFile_GUI_4.png"
                     scalefit="1" width="100%"/>
        </imageobject>
      </mediaobject>
    </screenshot>
  </refsection>

  <refsection xml:id="EphemerisFile_Remarks">
    <title>Remarks</title>

    <refsection>
      <title>Behavior of Coordinate System Field for CCSDS and Code 500 File
      Formats</title>

      <para>If the selected <guilabel>CoordinateSystem</guilabel> uses
      MJ2000Eq axes, the CCSDS ephemeris file contains “EME2000” for the
      REF_FRAME according to CCSDS convention. By CCSDS requirements,
      non-standard axes names are allowed when documented in an ICD. The
      <guilabel>CoordinateSystems</guilabel> specifications document in the
      user's guide is the ICD for all axes supported by GMAT. Also if you
      create a new coordinate system whose origin is Luna, then the CCSDS
      ephemeris file contains “Moon” for the CENTER_NAME.</para>

      <para>For code 500 file format, J2000 epoch can be with reference to
      central body that you select.</para>

      <para>There is one important difference between GMAT and IAU
      conventions. By IAU convention, there is no name for the IAU2000 axes
      that is independent of the origin. GCRF is coordinate system centered at
      earth with IAU2000 axes, and ICRF is a coordinate system centered at the
      solar system barycenter with IAU2000 axes. We have chosen to name the
      IAU2000 axes ICRF regardless of the origin. Please refer to
      <guilabel>CoordinateSystems</guilabel> specifications document to read
      more about built-in coordinate systems and description of Axes types
      that GMAT supports.</para>
    </refsection>

    <refsection>
      <title>Behavior of Ephemeris File during Discontinuous &amp; Iterative
      Processes</title>

      <para>When generating an ephemeris file for a mission sequence, GMAT
      separately interpolates ephemeris segments that are bounded by
      discontinuous or discrete mission events. Discontinuous or discrete
      mission sequence events can range from impulsive or finite-burn
      maneuvers, changes in dynamics models or when using assignment commands.
      Furthermore, when a mission sequence employs iterative processes such as
      differential correction or optimization, GMAT only writes the ephemeris
      for the final solution from the iterative processes. See the <xref
      linkend="EphemerisFile_Examples" xrefstyle="select:title"/> section
      below to see how an ephemeris file is generated during a discontinuous
      event such as an impulsive burn and iterative process like differential
      correction.</para>

      <para>Version 1 of CCSDS Orbit Data Messages (ODMs) document used to
      require that the ephemeris be generated in increasing time order and
      only going forward. However version 2 of CCSDS ODM document now allows
      for ephemeris file to be generated backwards as well. Currently in GMAT,
      when you propagate a spacecraft backwards in time, then the ephemeris is
      also generated backwards.</para>
	  
	        <warning>
        <para>The Code500 ephemeris file requires fixed time steps and has a
        pre-defined format for handling chunks of ephemeris data. The format
        does not allow chunking to stop and start at state discontinuities
        that occur at impulsive maneuvers. GMAT's current behavior is to
        interpolate across those discontinuities as the code 500 format does
        not elegantly support ephemerides with discontinuities. This is
        acceptable for small maneuvers but becomes less accurate as the
        maneuvers grow in magnitude. We recommend using more modern ephemeris
        file formats for this reasson.</para>
      </warning>
	  
    </refsection>

    <refsection>
      <title>Behavior of Ephemeris File When It Does Not Meet CCSDS File
      Format Requirements</title>

      <para>When an ephemeris file is generated, it needs to follow the
      Recommended Standard for ODMs that has been prepared by the CCSDS. The
      set of orbit data messages described in the Recommended Standard is the
      baseline concept of trajectory representation in data interchange
      applications that are cross-supported between Agencies of the CCSDS.
      CCSDS-ODM Recommended Standard documents establishes a common framework
      and provides a common basis for the interchange of orbit data.</para>

      <para>Currently, the ephemeris file that is generated by GMAT meets most
      of the recommended standards that are prescribed by the CCSDS. However
      whenever there is a case when GMAT’s ephemeris violates CCSDS file
      format requirements, then the generated ephemeris file will display a
      warning in ephemeris file’s Header section. More specifically, this
      warning will be given under COMMENT and it will let you know that this
      ephemeris file does not fully satisfy CCSDS file formatting
      requirements.</para>
    </refsection>

    <refsection>
      <title>Behavior of Interpolation Order Field for CCSDS, SPK and Code 500
      File Formats</title>

      <para>For CCSDS file formats, whenever there is not enough raw data
      available to support the requested interpolation type and order, GMA
      throws an error message and stops interpolation. GMAT still generates
      the ephemeris file but no spacecraft ephemeris data is written to the
      file and only the file’s Header section will be there. Within the Header
      section and under COMMENT, a message will be thrown saying that not
      enough raw data is available to generate spacecraft ephemeris data at
      the requested interpolation order.</para>

      <para>For SPK file formats, raw data is always collected at every
      integrator step for each segment and then sent to SPK kernel writer.
      GMAT does not perform any interpolation for SPK files as SPK contains
      its own interpolation. As a result, <guilabel>InitialEpoch</guilabel>
      and <guilabel>FinalEpoch</guilabel> fields behave differently for SPK
      ephemerides. The first epoch on the file is the first step after
      <guilabel>InitialEpoch</guilabel>. The last epoch on the file is the
      last step before <guilabel>FinalEpoch.</guilabel></para>

      <para>For code 500 file formats, you can set the interpolation order and
      currently GMAT supports Lagrange as the available interpolator method.
      For code 500 file formats, if there is not enough raw data available to
      support interpolation type and order, GMAT will throw an error message
      and stop interpolation.</para>
    </refsection>

    <refsection>
      <title>Behavior When Using EphemerisFile Resource &amp; Toggle
      Command</title>

      <para><guilabel>EphemerisFile</guilabel> resource generates ephemeris
      file at each propagation step of the entire mission duration. If you
      want to generate ephemeris data during specific points in your mission,
      then a <guilabel>Toggle</guilabel> <guilabel>On/Off</guilabel> command
      can be inserted into the <guilabel>Mission</guilabel> tree to control
      when the <guilabel>EphemerisFile </guilabel>resource writes data. When
      <guilabel>Toggle</guilabel> <guilabel>Off</guilabel> command is issued
      for an <guilabel>EphemerisFile</guilabel> subscriber, no data is sent to
      a file until a <guilabel>Toggle</guilabel> <guilabel>On</guilabel>
      command is issued. Similarly, when a <guilabel>Toggle</guilabel>
      <guilabel>On</guilabel> command is used, ephemeris data is sent to a
      file at each integration step until a <guilabel>Toggle</guilabel> Off
      command is used.</para>

      <para>Below is an example script snippet that shows how to use
      <guilabel>Toggle Off/On</guilabel> commands while using the
      <guilabel>EphemerisFile</guilabel> resource. No ephemeris data is sent
      for first two days of propagation and only the data that is collected
      during last four days of propagation is sent to text file called
      ‘<literal>EphemerisFile1.eph</literal>’:</para>

      <programlisting><code>Create Spacecraft aSat
Create Propagator aProp

Create EphemerisFile anEphmerisFile

anEphmerisFile.Spacecraft = aSat
anEphmerisFile.Filename = 'EphemerisFile1.eph'

BeginMissionSequence

Toggle anEphmerisFile Off
Propagate aProp(aSat) {aSat.ElapsedDays = 2}
Toggle anEphmerisFile On
Propagate aProp(aSat) {aSat.ElapsedDays = 4}</code></programlisting>
    </refsection>

    <refsection>
      <title>Behavior of Code 500 Ephemeris File During Discontinuous &amp;
      Iterative Processes</title>

      <para>Code 500 ephemeris file follows the ephemeris format and
      definitions that have been defined in <emphasis>Flight Dynamics Division
      (FDD) Generic Data Product Formats Interface Control
      Document</emphasis>.</para>

      <para>Unlike CCSDS ephemeris file, code 500 ephemeris does not support
      separate chunks in the data blocks whenever discontinuous or discrete
      mission events such as impulsive/finite maneuvers, change in dynamics or
      assignment command takes place. Rather, code 500 ephemeris is generated
      all in one continuous data block regardless of any number of mission
      events that may occur between initial and final epochs of ephemeris
      file. Furthermore, when a mission sequence employs iterative processes
      such as differential correction or optimization, GMAT will only write
      the ephemeris for the final solution from the iterative processes. Code
      500 ephemeris does not allow non-monotonic ephemeris generation and an
      exception will be thrown if propagation direction changes. Furthermore,
      any discontinuities created by assignments may result in invalid code
      500 files.</para>
    </refsection>

    <refsection>
      <title>Code 500 Ephemeris Header Records</title>

      <para>The standard format for Code 500 ephemeris files has a logical
      record length of 2800 bytes. Code 500 files have two header records,
      ephemeris header record 1 and ephemeris record 2, followed by as many
      ephemeris data records as required for the file timespan. Many
      parameters in ephemeris file's header records are mandatory while some
      fields are optional. GMAT's Code 500 ephemeris header records only
      specifies fields that are mandatory and optional fields have not been
      included. Code 500's ephemeris header record 1 is mandatory while
      ephemeris record 2 is optional. Complete description of ephemeris format
      and list of mandatory and optional ephemeris header record parameters is
      defined in <emphasis>Flight Dynamics Division (FDD) Generic Data Product
      Formats Interface Control Document</emphasis>. In GMAT, only required
      fields have been written in header record 1 while header record 2 is
      left blank. Table below lists header record 1's required fields and any
      additional comments pertaining to that field.</para>

      <informaltable colsep="0" frame="topbot">
        <tgroup cols="2">
          <colspec colnum="1" colwidth="3.5*"/>

          <colspec colnum="2" colwidth="3*"/>

          <thead>
            <row>
              <entry>Required Fields</entry>

              <entry>Comments</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>
                <guilabel>productId</guilabel>
              </entry>

              <entry>
                <para>'EPHEM '</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>satId</guilabel>
              </entry>

              <entry>
                <para>123.000000</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>timeSystemIndicator</guilabel>
              </entry>

              <entry>
                <para>2.000000</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>StartDateOfEphem_YYYMMDD</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>startDayCountOfYear</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>startSecondsOfDay</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>endDateOfEphem_YYYMMDD</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>endDayCountOfYear</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>endSecondsOfDay</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>stepSize_SEC</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>startYYYYMMDDHHMMSSsss.</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>endYYYYMMDDHHMMSSsss.</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>tapeId</guilabel>
              </entry>

              <entry>
                <para>'STANDARD'</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>sourceId</guilabel>
              </entry>

              <entry>
                <para>'GTDS '</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>headerTitle</guilabel>
              </entry>

              <entry>
                <para>'</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>centralBodyIndicator</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>refTimeForDUT_YYMMDD</guilabel>
              </entry>

              <entry>
                <para>570918.000000</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>coordSystemIndicator1</guilabel>
              </entry>

              <entry>
                <para>'2000'</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>coordSystemIndicator2</guilabel>
              </entry>

              <entry>
                <para>4</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>orbitTheory</guilabel>
              </entry>

              <entry>
                <para>'COWELL '</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>timeIntervalBetweenPoints_DUT</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>timeIntervalBetweenPoints_SEC</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>outputIntervalIndicator</guilabel>
              </entry>

              <entry>
                <para>1</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>epochTimeOfElements_DUT</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>epochTimeOfElements_DAY.</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>epochA1Greg.</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>epochUtcGreg.</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>yearOfEpoch_YYY</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>monthOfEpoch_MM</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>dayOfEpoch_DD</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>hourOfEpoch_HH</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>minuteOfEpoch_MM</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>secondsOfEpoch_MILSEC</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>keplerianElementsAtEpoch_RAD[0]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>keplerianElementsAtEpoch_RAD[1]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>keplerianElementsAtEpoch_RAD[2]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>keplerianElementsAtEpoch_RAD[3]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>keplerianElementsAtEpoch_RAD[4]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>keplerianElementsAtEpoch_RAD[5]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>cartesianElementsAtEpoch_DULT[0]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>cartesianElementsAtEpoch_DULT[1]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>cartesianElementsAtEpoch_DULT[2]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>cartesianElementsAtEpoch_DULT[3]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>cartesianElementsAtEpoch_DULT[4]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>cartesianElementsAtEpoch_DULT[5]</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>startTimeOfEphemeris_DUT</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>endTimeOfEphemeris_DUT</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>timeIntervalBetweenPoints_DUT</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>dateOfInitiationOfEphemComp_YYYMMDD</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>timeOfInitiationOfEphemComp_HHMMSS</guilabel>
              </entry>

              <entry>
                <para>value depends on run time</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>utcTimeAdjustment_SEC</guilabel>
              </entry>

              <entry>
                <para>0.000000</para>
              </entry>
            </row>

            <row>
              <entry>
                <guilabel>Pecession/Nutation indicator</guilabel>
              </entry>

              <entry>
                <para>1</para>
              </entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
	  
	  
  <para>For ephemeris header record 1, there are some required fields that
  have not been tabulated in GMAT's Code 500 ephemeris header record 1. These
  fields that have not been tabulated in header record 1 are listed in the
  table below. 0.0 indicates "used" and 1.0 means "not used".</para>
	  
    <informaltable colsep="0" frame="topbot">
      <tgroup cols="2">
        <colspec colnum="1" colwidth="3.5*"/>

        <colspec colnum="2" colwidth="3*"/>

        <thead>
          <row>
            <entry>Required Fields</entry>

            <entry>Comments</entry>
          </row>
        </thead>

        <tbody>
          <row>
            <entry>
              <guilabel>Zonal and tesseral harmonics indicator</guilabel>
            </entry>

            <entry>
              <para>1.0</para>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>Lunar gravitation perturbation indicator</guilabel>
            </entry>

            <entry>
              <para>1.0</para>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>Solar radiation perturbation indicator</guilabel>
            </entry>

            <entry>
              <para>1.0</para>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>Solar gravitation perturbation indicator</guilabel>
            </entry>

            <entry>
              <para>1.0</para>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>Atmospheric drag perturbation indicator</guilabel>
            </entry>

            <entry>
              <para>1.0</para>
            </entry>
          </row>

          <row>
            <entry>
              <guilabel>Greenwich hour angle at epoch</guilabel>
            </entry>

            <entry>
              <para>1.0</para>
            </entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>  
    </refsection>
	
  </refsection>





  <refsection xml:id="EphemerisFile_Examples">
    <title>Examples</title>

    <informalexample>
      <para>This example shows how to generate a simple ephemeris file.
      Ephemeris file is generated for two days of propagation. At default
      settings, ephemeris file is generated at each integrator step and in
      CCSDS file format. Ephemeris data is sent to text file called
      ‘<literal>EphemerisFile2.eph</literal>’:</para>

      <programlisting><code>Create Spacecraft aSat
Create Propagator aProp

Create EphemerisFile anEphmerisFile

anEphmerisFile.Spacecraft = aSat
anEphmerisFile.Filename = 'EphemerisFile2.eph'

BeginMissionSequence

Propagate aProp(aSat) {aSat.ElapsedDays = 2}</code></programlisting>
    </informalexample>

    <informalexample>
      <para>This example shows how an ephemeris file is generated during an
      iterative process like differential correction that includes a
      discontinuous event like an impulsive burn. Ephemeris data is sent to
      text file called ‘<literal>EphemerisFile3.eph</literal>’:</para>

      <programlisting><code>Create Spacecraft aSat
Create Propagator aProp

Create ImpulsiveBurn TOI
Create DifferentialCorrector aDC

Create EphemerisFile anEphmerisFile

anEphmerisFile.Spacecraft = aSat
anEphmerisFile.Filename = 'EphemerisFile3.eph'

BeginMissionSequence

Propagate aProp(aSat) {aSat.Earth.Periapsis}

Target aDC
 Vary aDC(TOI.Element1 = 0.24, {Perturbation = 0.001, Lower = 0.0, ...
 Upper = 3.14159, MaxStep = 0.5})
 Maneuver TOI(aSat)
 Propagate aProp(aSat) {aSat.Earth.Apoapsis}
 Achieve aDC(aSat.Earth.RMAG = 42165)
EndTarget

Propagate aProp(aSat) {aSat.ElapsedDays = 1}</code></programlisting>
    </informalexample>
  </refsection>
</refentry>
