<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xml:id="PropagatingSpacecraft"
         xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:m="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
  <title>Propagating a Spacecraft</title>

  <section>
    <title>Configuring the Force Model</title>

    <para>Propagation in GMAT is governed by a force model and an integrator,
    which together form a propagator. The force model component offers many
    options that let you control the fidelity of the simulation, from a simple
    two-body model with a single point mass to a full-featured model with
    central body non-spherical gravity, external point masses, atmospheric
    drag, and more. This example configures an Earth-centered model with some
    commonly-used parameters. Starting from the default mission:</para>

    <procedure>
      <step>
        <para>In the <guilabel>Resources</guilabel> tree, double-click
        <guilabel>DefaultProp</guilabel> to open its properties window.</para>
      </step>

      <step>
        <para>Under <guilabel>Gravity</guilabel>, in the
        <guilabel>Degree</guilabel> box, type
        <userinput>21</userinput>.</para>
      </step>

      <step>
        <para>In the <guilabel>Order</guilabel> box, type
        <userinput>21</userinput>.</para>
      </step>

      <step>
        <para>In the <guilabel>Atmosphere Model</guilabel> list, click
        <guilabel>MSISE90</guilabel>.</para>
      </step>

      <step>
        <para>Next to the <guilabel>PointMasses</guilabel> box, click the
        <guibutton>Select</guibutton> button.</para>
      </step>

      <step>
        <para>In the <guilabel>Available Bodies</guilabel> list on the left,
        click <guilabel>Sun</guilabel>, then click
        <guibutton>-&gt;</guibutton> to add <guilabel>Sun</guilabel> to your
        force model.</para>
      </step>

      <step>
        <para>Add <guilabel>Luna</guilabel> (Earth's moon) and
        <guilabel>Jupiter</guilabel> using the same steps as above.</para>
      </step>

      <step>
        <para>Click <guilabel>OK</guilabel> to accept your changes.</para>
      </step>

      <step>
        <para>Select <guilabel>Use Solar Radiation Pressure</guilabel> to
        activate the solar radiation pressure force.</para>
      </step>

      <step>
        <para>Click <guilabel>OK</guilabel> to accept your changes.</para>
      </step>
    </procedure>

    <para>The script for the force model configured above is shown
    below.</para>

    <programlisting>Create ForceModel DefaultProp_ForceModel
DefaultProp_ForceModel.CentralBody = Earth
DefaultProp_ForceModel.PrimaryBodies = {Earth}
DefaultProp_ForceModel.PointMasses = {Jupiter, Luna}
DefaultProp_ForceModel.Drag.AtmosphereModel = 'MSISE90'
DefaultProp_ForceModel.SRP = On
DefaultProp_ForceModel.GravityField.Earth.Degree = 21
DefaultProp_ForceModel.GravityField.Earth.Order = 21
DefaultProp_ForceModel.GravityField.Earth.PotentialFile = 'JGM2.cof'</programlisting>
  </section>

  <section>
    <title>Propagating for a Duration</title>

    <para>GMAT can propagate a spacecraft for a duration of time, such as 60
    seconds, 10 days, or one orbit period. Starting from the default
    mission:</para>

    <procedure>
      <step>
        <para>Click the <guilabel>Mission</guilabel> tab to show the
        <guilabel>Mission</guilabel> tree.</para>
      </step>

      <step>
        <para>Double-click <guilabel>Propagate1</guilabel>. The default
        mission is configured to propagate the DefaultSC spacecraft for 12000
        seconds.</para>
      </step>

      <step>
        <para>In the <guilabel>Parameter</guilabel> column, to the left of
        <guilabel>DefaultSC.ElapsedSecs</guilabel>, click
        <guibutton>…</guibutton>. This will display a window allowing you to
        choose a new type of duration parameter.</para>
      </step>

      <step>
        <para>In the <guilabel>Object Properties</guilabel> list, click
        <guilabel>ElapsedDays</guilabel>, then click
        <guibutton>-&gt;</guibutton> to add it to the <guilabel>Selected
        Value(s)</guilabel> list.</para>
      </step>

      <step>
        <para>Click <guibutton>OK</guibutton>.</para>
      </step>

      <step>
        <para>In the <guilabel>Condition</guilabel> column, double-click the
        value <userinput>0.0</userinput> and enter <userinput>10</userinput>
        instead.</para>
      </step>

      <step>
        <para>Click <guibutton>OK</guibutton>, then click
        <guibutton>Run</guibutton>.</para>
      </step>
    </procedure>

    <para>GMAT will propagate the spacecraft for 10 days. Observe the 2D and
    3D plots showing the propagated orbit.</para>
  </section>

  <section>
    <title>Propagating to an Orbit Condition</title>

    <para>GMAT can propagate a spacecraft to a specific orbit condition, such
    as periapsis, an altitude value, or a latitude value. Starting from the
    default mission:</para>

    <procedure>
      <step>
        <para>Click the <guilabel>Mission</guilabel> tab to show the
        <guilabel>Mission</guilabel> tree.</para>
      </step>

      <step>
        <para>Double-click <guilabel>Propagate1</guilabel>. The default
        mission is configured to propagate the DefaultSC spacecraft for 12000
        seconds.</para>
      </step>

      <step>
        <para>In the <guilabel>Parameter</guilabel> column, to the left of
        <guilabel>DefaultSC.ElapsedSecs</guilabel>, click
        <guibutton>…</guibutton>. This will display a window allowing you to
        choose a new type of duration parameter.</para>
      </step>

      <step>
        <para>In the <guilabel>Object Properties</guilabel> list, click
        <guilabel>Periapsis</guilabel>.</para>
      </step>

      <step>
        <para>In the <guilabel>Central Body</guilabel> list, make sure
        <guilabel>Earth</guilabel> is selected. Then click
        <guibutton>-&gt;</guibutton> to add it to the <guilabel>Selected
        Value(s)</guilabel> list.</para>
      </step>

      <step>
        <para>Click <guibutton>OK</guibutton> to close the
        <guilabel>ParameterSelectDialog</guilabel> window.</para>
      </step>

      <step>
        <para>Click <guibutton>OK</guibutton>, then click
        <guibutton>Run</guibutton>.</para>
      </step>
    </procedure>

    <para>GMAT will propagate the spacecraft until it reaches orbit
    periapsis.</para>
  </section>
</chapter>
