<?xml version="1.0" encoding="UTF-8"?>
<chapter version="5.0" xml:id="Tut_EventLocation"
         xmlns="http://docbook.org/ns/docbook"
         xmlns:xlink="http://www.w3.org/1999/xlink"
         xmlns:xi="http://www.w3.org/2001/XInclude"
         xmlns:svg="http://www.w3.org/2000/svg"
         xmlns:m="http://www.w3.org/1998/Math/MathML"
         xmlns:html="http://www.w3.org/1999/xhtml"
         xmlns:db="http://docbook.org/ns/docbook">
  <title>Finding Eclipses and Station Contacts</title>

  <variablelist>
    <varlistentry>
      <term>Audience</term>

      <listitem>
        <para>Beginner</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Length</term>

      <listitem>
        <para>30 minutes</para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Prerequisites</term>

      <listitem>
        <para>Complete <xref linkend="SimpleOrbitTransfer"
        xrefstyle="select:title"/></para>
      </listitem>
    </varlistentry>

    <varlistentry>
      <term>Script File</term>

      <listitem>
        <para><filename>Tut_FindingEclipsesAndContacts.script</filename></para>
      </listitem>
    </varlistentry>
  </variablelist>

  <section>
    <title>Objective and Overview</title>

    <para>In this tutorial we will modify an existing mission to add eclipse
    and station contact detection using the
    <guilabel>EclipseLocator</guilabel> and
    <guilabel>ContactLocator</guilabel> resources. We will start with the
    completed Simple Orbit Transfer mission and modify it to add these event
    reports.</para>

    <para>The basic steps of this tutorial are:</para>

    <procedure>
      <step>
        <para>Load the Simple Orbit Transfer mission.</para>
      </step>

      <step>
        <para>Configure GMAT for event location.</para>
      </step>

      <step>
        <para>Add and configure an <guilabel>EclipseLocator</guilabel> to
        report eclipses.</para>
      </step>

      <step>
        <para>Run the mission and analyze the eclipse report.</para>
      </step>

      <step>
        <para>Add and configure a <guilabel>GroundStation</guilabel> and a
        <guilabel>ContactLocator</guilabel> to report contact times.</para>
      </step>

      <step>
        <para>Run the mission and analyze the contact report.</para>
      </step>
    </procedure>
  </section>

  <section>
    <title>Load the Mission</title>

    <para>For this tutorial, we will start with a preexisting mission created
    during the Simple Orbit Transfer tutorial. You can either complete that
    tutorial prior to this one, or you can load the end result directly, as
    shown below.</para>

    <procedure>
      <step>
        <para>Open GMAT.</para>
      </step>

      <step>
        <para>Click <guilabel>Open</guilabel> in the toolbar and navigate to
        the GMAT <filename>samples</filename> directory.</para>
      </step>

      <step>
        <para>Select <filename>Tut_SimpleOrbitTransfer.script</filename> and
        click <guibutton>Open</guibutton>.</para>
      </step>

      <step>
        <para>Click <guilabel>Run</guilabel> (<inlinemediaobject>
            <imageobject>
              <imagedata align="center" contentdepth="8pt"
                         fileref="files/images/icons/RunMission.png"
                         width="1em"/>
            </imageobject>
          </inlinemediaobject>) to run the mission.</para>
      </step>
    </procedure>

    <para>You should see the following result in the
    <guilabel>DefaultOrbitView</guilabel> window.</para>

    <informalfigure>
      <screenshot>
        <mediaobject>
          <imageobject>
            <imagedata align="center" contentdepth="100%"
                       fileref="files/images/Tut_EventLocation_1.png"
                       scalefit="1" width="100%"/>
          </imageobject>
        </mediaobject>
      </screenshot>
    </informalfigure>
  </section>

  <section>
    <title>Configure GMAT for Event Location</title>

    <para/>
  </section>

  <section>
    <title>Configure and Run the Eclipse Locator</title>

    <para/>

    <section>
      <title>Configure the EclipseLocator Resource</title>

      <procedure>
        <step>
          <para>Click on the <guilabel>Mission</guilabel> tab to show the
          <guilabel>Mission</guilabel> tree.</para>
        </step>

        <step>
          <para>Configure <guilabel>Propagate1</guilabel> to propagate to
          <userinput>DefaultSC.Earth.Periapsis</userinput>.</para>
        </step>

        <step>
          <para>Rename <guilabel>Propagate1</guilabel> to <userinput>Prop To
          Periapsis</userinput>.</para>
        </step>
      </procedure>
    </section>

    <section>
      <title>Run the Mission</title>

      <procedure>
        <step>
          <para>Click on the <guilabel>Mission</guilabel> tab to show the
          <guilabel>Mission</guilabel> tree.</para>
        </step>

        <step>
          <para>Configure <guilabel>Propagate1</guilabel> to propagate to
          <userinput>DefaultSC.Earth.Periapsis</userinput>.</para>
        </step>

        <step>
          <para>Rename <guilabel>Propagate1</guilabel> to <userinput>Prop To
          Periapsis</userinput>.</para>
        </step>
      </procedure>
    </section>
  </section>

  <section>
    <title>Configure and Run the Contact Locator</title>

    <para/>

    <section>
      <title>Add Ground Stations</title>

      <procedure>
        <step>
          <para>Click on the <guilabel>Mission</guilabel> tab to show the
          <guilabel>Mission</guilabel> tree.</para>
        </step>

        <step>
          <para>Configure <guilabel>Propagate1</guilabel> to propagate to
          <userinput>DefaultSC.Earth.Periapsis</userinput>.</para>
        </step>

        <step>
          <para>Rename <guilabel>Propagate1</guilabel> to <userinput>Prop To
          Periapsis</userinput>.</para>
        </step>
      </procedure>
    </section>

    <section>
      <title>Configure the ContactLocator Resource</title>

      <procedure>
        <step>
          <para>Click on the <guilabel>Mission</guilabel> tab to show the
          <guilabel>Mission</guilabel> tree.</para>
        </step>

        <step>
          <para>Configure <guilabel>Propagate1</guilabel> to propagate to
          <userinput>DefaultSC.Earth.Periapsis</userinput>.</para>
        </step>

        <step>
          <para>Rename <guilabel>Propagate1</guilabel> to <userinput>Prop To
          Periapsis</userinput>.</para>
        </step>
      </procedure>
    </section>

    <section>
      <title>Run the Mission</title>

      <procedure>
        <step>
          <para>Click on the <guilabel>Mission</guilabel> tab to show the
          <guilabel>Mission</guilabel> tree.</para>
        </step>

        <step>
          <para>Configure <guilabel>Propagate1</guilabel> to propagate to
          <userinput>DefaultSC.Earth.Periapsis</userinput>.</para>
        </step>

        <step>
          <para>Rename <guilabel>Propagate1</guilabel> to <userinput>Prop To
          Periapsis</userinput>.</para>
        </step>
      </procedure>
    </section>
  </section>
</chapter>
