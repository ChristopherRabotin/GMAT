
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>badkpv_c</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr><td>
<div align="center">
Index of Functions: 
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div>
</td></tr>

    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>badkpv_c</b></td>
    </tr>
    

    <tr>
      <td style="vertical-align: top;">

       <br>
       <div align="left"><b>Table of contents</b></div>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>
              <a href="#Detailed_Input">Detailed_Input<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>
              <big><b><a href="#Examples">Examples<br></a></b></big>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
              <a href="#Index_Entries">Index_Entries<br></a>
            </td>
          </tr>
        </tbody>
</table>
<hr>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
   badkpv_c ( Bad Kernel Pool Variable ) 

   SpiceBoolean badkpv_c ( ConstSpiceChar    *caller,
                           ConstSpiceChar    *name,
                           ConstSpiceChar    *comp,
                           SpiceInt           size,
                           SpiceInt           divby,
                           SpiceChar          type   )

</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
   Determine if a kernel pool variable is present and if so
   that it has the correct size and type.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
   <a href="../req/error.html">ERROR</a>
   <a href="../req/kernel.html">KERNEL</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
   ERROR


</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
   VARIABLE  I/O  DESCRIPTION
   --------  ---  --------------------------------------------------
   caller     I   Name of the routine calling this routine.
   name       I   Name of a kernel pool variable.
   comp       I   Comparison operator.
   size       I   Expected size of the kernel pool variable.
   divby      I   A divisor of the size of the kernel pool variable.
   type       I   Expected type of the kernel pool variable.

   The function returns SPICEFALSE if the kernel pool variable is OK.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
   caller      is the name of the routine calling this routine
               to check correctness of kernel pool variables.

   name        is the name of a kernel pool variable that the
               calling program expects to be present in the
               kernel pool.

   comp        is the comparison operator to use when comparing
               the number of components of the kernel pool variable
               specified by `name' with the integer `size'. If `dim' is
               is the actual size of the kernel pool variable then
               <b>badkpv_c</b> will check that the sentence

                  dim comp size

               is a true statement. If it is not a true statement
               an error will be signaled.

               Allowed values for `comp' and their meanings are:

                  &quot;=&quot;      dim == size
                  &quot;&lt;&quot;      dim &lt;  size
                  &quot;&gt;&quot;      dim &gt;  size
                  &quot;=&gt;&quot;     dim &gt;= size
                  &quot;&lt;=&quot;     dim &lt;= size

   size        is an integer to compare with the actual
               number of components of the kernel pool variable
               specified by `name'.

   divby       is an integer that is one of the factors of the
               actual dimension of the specified kernel pool variable.
               In other words, it is expected that `divby' evenly
               divides the actual dimension of `name'. In those
               cases in which the factors of the dimension of `name'
               are not important, set `divby' to 1 in the calling
               program.

   type        is the expected type of the kernel pool variable.
               Recognized values are

                  &quot;C&quot; for character type
                  &quot;N&quot; for numeric type (integer and double precision)

               The case of `type' is insignificant. If the value
               of `type' is not one of the 2 values given above
               no check for the type of the variable will be
               performed.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
   The function returns the value SPICEFALSE if the kernel pool
   variable has the expected properties. Otherwise the routine
   signals an error and returns the value SPICETRUE.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
   None.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
   1)  If the kernel pool variable specified by `name' is not present
       in the kernel pool, the error SPICE(VARIABLENOTFOUND) is
       signaled by a routine in the call tree of this routine and the
       routine will return the value SPICETRUE.

   2)  If the comparison operator specified by `comp' is unrecognized,
       the error SPICE(UNKNOWNCOMPARE) is signaled by a routine in
       the call tree of this routine and the routine will return the
       value SPICETRUE.

   3)  If the expected type of the kernel pool variable `type' is not
       one of the supported types, the error SPICE(INVALIDTYPE) is
       signaled by a routine in the call tree of this routine and the
       routine will return the value SPICETRUE.

   4)  If the comparison of the actual size of the kernel pool
       variable with `size' is not satisfied, the error
       SPICE(BADVARIABLESIZE) is signaled by a routine in the call
       tree of this routine and the routine will return the value
       SPICETRUE.

   5)  If the variable does not have the expected type, the error
       SPICE(BADVARIABLETYPE) is signaled by a routine in the call
       tree of this routine and the routine will return the value
       SPICETRUE.

   6)  If any of the `caller', `name' or `comp' input string pointers
       is null, the error SPICE(NULLPOINTER) is signaled. The
       function returns the value SPICETRUE.

   7)  If any of the `caller', `name' or `comp' input strings has
       zero length, the error SPICE(EMPTYSTRING) is signaled. The
       function returns the value SPICETRUE.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
   None.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
   This routine takes care of routine checking that often needs
   to be done by programs and routines that rely upon kernel
   pool variables being present and having the correct attributes.

   It checks for the presence of the kernel pool variable and
   examines the type and dimension of the variable to make sure
   they conform to the requirements of the calling routine.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
   The numerical results shown for this example may differ across
   platforms. The results depend on the SPICE kernels used as
   input, the compiler and supporting libraries, and the machine
   specific arithmetic implementation.

   1) Suppose that you need to fetch a number of variables
      from the kernel pool and want to check that the requested
      items are in fact available prior to performing further
      computations. The code example shows how you might use
      this routine to handle the details of checking of
      the various items.

      Although by default the SPICE error handling system will
      report the error and halt the execution of the program, in
      this example we have decided to change this behavior to
      display the error messages and continue the execution of
      the program.

      Use the kernel shown below to define some variables related
      to the Earth.


         KPL/PCK

         File name: badkpv_ex1.tpc

         The contents of this kernel are not intended for
         real applications. Use only with this example.

         \begindata

            BODY_399_DATA  = ( 3.1416, 2.71828, 0.5, 12.0 )
            BODY_399_NAMES = ( 'PI', 'E', 'HALF', 'DOZEN' )

         \begintext

         End of constants kernel


      Example code begins here.


      /.
         Program badkpv_ex1
      ./
      #include &lt;stdio.h&gt;
      #include &quot;SpiceUsr.h&quot;

      int main( )
      {

         /.
         Local parameters.
         ./
         #define CALLER       &quot;BADKPV_EX1&quot;

         /.
         Local variables.
         ./
         SpiceChar          * comp;
         SpiceChar          * name;
         SpiceChar            type;

         SpiceInt             divby;
         SpiceInt             size;

         /.
         Load the test kernel.
         ./
         <a href="furnsh_c.html">furnsh_c</a> ( &quot;badkpv_ex1.tpc&quot; );

         /.
         Change the default behavior of the SPICE error handling
         system to print out all messages and continue the
         execution of the program.  We do this for demonstration
         purposes.  Please, refrain from changing the default
         behavior on real applications.
         ./
         <a href="erract_c.html">erract_c</a> ( &quot;SET&quot;, 7, &quot;REPORT&quot; );

         /.
         Assume that we need some data for body 399 and we expect
         there to be an even number of items available and at
         least 4 such items. Moreover we expect these items to be
         numeric. Note that the variable assignments below are
         present only to assist in understanding the calls to
         <b>badkpv_c</b>.
         ./
         name  = &quot;BODY_399_DATA&quot;;
         comp  = &quot;=&gt;&quot;;
         size  =  4;
         divby =  2;
         type  = 'N';

         if ( ! <b>badkpv_c</b> ( CALLER, name, comp, size, divby, type ) )
         {

            printf( &quot;Expected form of variable %s found in kernel pool.\n&quot;,
                                                                       name );

         }

         /.
         In addition we need the names given to these items.
         Improperly indicate the array has type numeric.
         ./
         name  = &quot;BODY_399_NAMES&quot;;
         comp  = &quot;=&gt;&quot;;
         size  =  4;
         divby =  1;
         type  = 'N';

         if ( ! <b>badkpv_c</b> ( CALLER, name, comp, size, divby, type ) )
         {

            printf( &quot;Expected form of variable %s found in kernel pool.\n&quot;,
                                                                       name );

         }

         /.
         Change the behavior of the SPICE error handling to
         its default.
         ./
         <a href="erract_c.html">erract_c</a> ( &quot;SET&quot;, 8, &quot;DEFAULT&quot; );

         return ( 0 );
      }


      When this program was executed on a Mac/Intel/cc/64-bit
      platform, the output was:


      Expected form of variable BODY_399_DATA found in kernel pool.

      =====================================================================

      Toolkit version: N0066

      SPICE(BADVARIABLETYPE) --

      BADKPV_EX1: The kernel pool variable 'BODY_399_NAMES' must be of type
      &quot;NUMERIC&quot;. However, the current type is character.

      A traceback follows.  The name of the highest level module is first.
      <b>badkpv_c</b> --&gt; BADKPV

      =====================================================================


      Note that, as expected, the error SPICE(BADVARIABLETYPE) is
      signaled by the second <b>badkpv_c</b> call, since we have improperly
      indicated that the requested array is numeric, when actually
      it is of character type.
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
   None.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
   None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
   N.J. Bachman        (JPL)
   J. Diaz del Rio     (ODC Space)
   W.L. Taber          (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
   -CSPICE Version 1.1.0, 13-AUG-2021 (JDR)

       Added exception SPICE(INVALIDTYPE) for the case of unknown
       expected kernel pool variable type.

       Edited the header to comply with NAIF standard. Added complete
       code example based on existing fragment. Added required
       readings references.

   -CSPICE Version 1.0.0, 07-JUL-2000 (WLT) (NJB)
</PRE>
<h4><a name="Index_Entries">Index_Entries</a></h4>
<PRE>
   Check the properties of a kernel pool variable
</PRE>
<h4>Link to routine badkpv_c source file <a href='../../../src/cspice/badkpv_c.c'>badkpv_c.c</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Fri Dec 31 18:41:01 2021</pre>

</body>
</html>

