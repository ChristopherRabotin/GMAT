
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>spkw18_c</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr><td>
<div align="center">
Index of Functions: 
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div>
</td></tr>

    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>spkw18_c</b></td>
    </tr>
    

    <tr>
      <td style="vertical-align: top;">

       <br>
       <div align="left"><b>Table of contents</b></div>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>
              <a href="#Detailed_Input">Detailed_Input<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>
              <big><b><a href="#Examples">Examples<br></a></b></big>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
              <a href="#Index_Entries">Index_Entries<br></a>
            </td>
          </tr>
        </tbody>
</table>
<hr>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
   spkw18_c ( Write SPK segment, type 18 ) 

   void spkw18_c ( SpiceInt             handle,
                   SpiceSPK18Subtype    subtyp,
                   SpiceInt             body,
                   SpiceInt             center,
                   ConstSpiceChar     * frame,
                   SpiceDouble          first,
                   SpiceDouble          last,
                   ConstSpiceChar     * segid,
                   SpiceInt             degree,
                   SpiceInt             n,
                   const void         * packts,
                   ConstSpiceDouble     epochs[]     )

</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
   Write a type 18 segment to an SPK file.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
   <a href="../req/naif_ids.html">NAIF_IDS</a>
   <a href="../req/spc.html">SPC</a>
   <a href="../req/spk.html">SPK</a>
   <a href="../req/time.html">TIME</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
   EPHEMERIS
   FILES


</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
   VARIABLE  I/O  DESCRIPTION
   --------  ---  --------------------------------------------------
   handle     I   Handle of an SPK file open for writing.
   subtyp     I   SPK type 18 subtype code.
   body       I   NAIF code for an ephemeris object.
   center     I   NAIF code for center of motion of `body'.
   frame      I   Reference frame name.
   first      I   Start time of interval covered by segment.
   last       I   End time of interval covered by segment.
   segid      I   Segment identifier.
   degree     I   Degree of interpolating polynomials.
   n          I   Number of packets.
   packts     I   Array of packets.
   epochs     I   Array of epochs corresponding to packets.
   MAXDEG     P   Maximum allowed degree of interpolating polynomial.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
   handle      is the file handle of an SPK file that has been opened
               for writing.

   subtyp      is an integer code indicating the subtype of the
               segment to be created.

   body        is the NAIF integer code for an ephemeris object whose
               state relative to another body is described by the
               segment to be created.

   center      is the NAIF integer code for the center of motion of the
               object identified by `body'.

   frame       is the NAIF name for a reference frame relative to which
               the state information for `body' is specified.

   first,
   last        are, respectively, the start and stop times of the time
               interval over which the segment defines the state of
               `body'.

   segid       is the segment identifier. An SPK segment identifier may
               contain up to 40 characters.

   degree      is the nominal degree of the polynomials used to
               interpolate the states contained in the input packets.
               All components of the state vectors are interpolated by
               polynomials of the specified degree, except near the
               segment boundaries, or if the total number of states in
               the segment is too few to allow interpolation using the
               specified degree.

               If the actual interpolation degree is reduced, the
               highest degree feasible degree valid for the
               interpolation type is used.

   n           is the number of packets in the input packet array.

   packts      is a time-ordered array of data packets representing
               geometric states of `body' relative to `center', specified
               relative to `frame'. The packet structure depends on the
               segment subtype as follows:

                  Type 0 (indicated by code S18TP0):

                     x,  y,  z,  dx/dt,  dy/dt,  dz/dt,
                     vx, vy, vz, dvx/dt, dvy/dt, dvz/dt

                  where x, y, z represent Cartesian position components
                  and  vx, vy, vz represent Cartesian velocity
                  components. Note well: vx, vy, and vz *are not
                  necessarily equal* to the time derivatives of x, y,
                  and z. This packet structure mimics that of the
                  Rosetta/MEX orbit file from which the data are taken.

                  Type 1 (indicated by code S18TP1):

                     x,  y,  z,  dx/dt,  dy/dt,  dz/dt

                  where x, y, z represent Cartesian position components
                  and  vx, vy, vz represent Cartesian velocity
                  components.

               Position units are kilometers, velocity units are
               kilometers per second, and acceleration units are
               kilometers per second per second.

   epochs      is an array of epochs corresponding to the members of the
               packets array. The epochs are specified as seconds past
               J2000, TDB.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
   None. See -Particulars for a description of the effect of this
   routine.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
   MAXDEG      is the maximum allowed degree of the interpolating polynomial.
               Its current value is 15.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
   If any of the following exceptions occur, this routine will
   return without creating a new segment.

   1)  If `frame' is not a recognized name, the error
       SPICE(INVALIDREFFRAME) is signaled by a routine in the call
       tree of this routine.

   2)  If the last non-blank character of `segid' occurs past index 40,
       the error SPICE(SEGIDTOOLONG) is signaled by a routine in the
       call tree of this routine.

   3)  If `segid' contains any nonprintable characters, the error
       SPICE(NONPRINTABLECHARS) is signaled by a routine in the call
       tree of this routine.

   4)  If `degree' is not at least 1 or is greater than MAXDEG, the
       error SPICE(INVALIDDEGREE) is signaled by a routine in the
       call tree of this routine.

   5)  If the window size implied by `degree' is odd, the error
       SPICE(INVALIDDEGREE) is signaled by a routine in the call tree
       of this routine.

   6)  If the number of packets `n' is not at least 2, the error
       SPICE(TOOFEWSTATES) is signaled by a routine in the call tree
       of this routine.

   7)  If `first' is greater than or equal to `last', the error
       SPICE(BADDESCRTIMES) is signaled by a routine in the call tree
       of this routine.

   8)  If the elements of the array `epochs' are not in strictly
       increasing order, the error SPICE(TIMESOUTOFORDER) is
       signaled by a routine in the call tree of this routine.

   9)  If the first epoch epochs[0] is greater than `first', the error
       SPICE(BADDESCRTIMES) is signaled by a routine in the call tree
       of this routine.

   10) If the last epoch epochs[n-1] is less than `last', the error
       SPICE(BADDESCRTIMES) is signaled by a routine in the call tree
       of this routine.

   11) If the subtype code is not recognized, the error
       SPICE(INVALIDVALUE) is signaled by a routine in the call tree
       of this routine.

   12) If any of the `frame' or `segid' input string pointers is
       null, the error SPICE(NULLPOINTER) is signaled.

   13) If any of the `frame' or `segid' input strings has zero
       length, the error SPICE(EMPTYSTRING) is signaled.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
   A new type 18 SPK segment is written to the SPK file attached
   to `handle'.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
   This routine writes an SPK type 18 data segment to the open SPK
   file according to the format described in the type 18 section of
   the SPK Required Reading. The SPK file must have been opened with
   write access.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
   Suppose that you have states and are prepared to produce
   a segment of type 18 in an SPK file.

   The following code fragment could be used to add the new segment
   to a previously opened SPK file attached to `handle'. The file must
   have been opened with write access.

       #include &quot;SpiceUsr.h&quot;
            .
            .
            .

       /.
       Create a segment identifier.
       ./
       #define  SEGID  &quot;MY_SAMPLE_SPK_TYPE_18_SEGMENT&quot;


       /.
       Write the segment.
       ./
       <b>spkw18_c</b> ( handle,  subtyp,  body,    center,
                  frame,   first,   last,    segid,
                  degree,  n,       states,  epochs );
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
   None.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
   None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
   N.J. Bachman        (JPL)
   J. Diaz del Rio     (ODC Space)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
   -CSPICE Version 1.0.2, 13-AUG-2021 (JDR)

       Edited the header to comply with NAIF standard.

       Changed, in the documentation, the argument name &quot;state&quot; to
       &quot;packts&quot;. Fixed exception entry #6, since the number of packets must
       be at least 2 and not 1. Added exception entry #11. Updated
       -Parameters section to remove reference to SPICELIB routines and
       add the actual value of the MAXDEG parameter.

   -CSPICE Version 1.0.1, 29-APR-2003 (NJB)

       Description of error condition arising from invalid window
       size was corrected.

   -CSPICE Version 1.0.0, 16-AUG-2002 (NJB)
</PRE>
<h4><a name="Index_Entries">Index_Entries</a></h4>
<PRE>
   write SPK type_18 ephemeris data segment
</PRE>
<h4>Link to routine spkw18_c source file <a href='../../../src/cspice/spkw18_c.c'>spkw18_c.c</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Fri Dec 31 18:41:13 2021</pre>

</body>
</html>

