
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>

<HEAD>
   <TITLE>spkopa_c</TITLE>
</HEAD>

<BODY style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 255);">
<A name="TOP"></A>

<table style="text-align: left; margin-left: auto; margin-right: auto; width: 800px;"
 border="0" cellpadding="5" cellspacing="2">
  <tbody>
    <tr><td>
<div align="center">
Index of Functions: 
<A HREF="index.html#A">A</A>&nbsp;
<A HREF="index.html#B">B</A>&nbsp;
<A HREF="index.html#C">C</A>&nbsp;
<A HREF="index.html#D">D</A>&nbsp;
<A HREF="index.html#E">E</A>&nbsp;
<A HREF="index.html#F">F</A>&nbsp;
<A HREF="index.html#G">G</A>&nbsp;
<A HREF="index.html#H">H</A>&nbsp;
<A HREF="index.html#I">I</A>&nbsp;
<A HREF="index.html#J">J</A>&nbsp;
<A HREF="index.html#K">K</A>&nbsp;
<A HREF="index.html#L">L</A>&nbsp;
<A HREF="index.html#M">M</A>&nbsp;
<A HREF="index.html#N">N</A>&nbsp;
<A HREF="index.html#O">O</A>&nbsp;
<A HREF="index.html#P">P</A>&nbsp;
<A HREF="index.html#Q">Q</A>&nbsp;
<A HREF="index.html#R">R</A>&nbsp;
<A HREF="index.html#S">S</A>&nbsp;
<A HREF="index.html#T">T</A>&nbsp;
<A HREF="index.html#U">U</A>&nbsp;
<A HREF="index.html#V">V</A>&nbsp;
<A HREF="index.html#W">W</A>&nbsp;
<A HREF="index.html#X">X</A>&nbsp;
</div>
</td></tr>

    <tr>
      <td style="background-color: rgb(153, 153, 153); vertical-align: middle; text-align: center;">
      <div align="right"> 
      <small><small><a href="index.html">Index Page</a></small></small>
      </div>
      <b>spkopa_c</b></td>
    </tr>
    

    <tr>
      <td style="vertical-align: top;">

       <br>
       <div align="left"><b>Table of contents</b></div>
       <table style="text-align: left; width: 60%; margin-left: auto; margin-right: auto;"
       border="0" cellspacing="2" cellpadding="2">
        <tbody>
          <tr>
            <td style="width: 33%; text-align: center;">
              <a href="#Procedure">Procedure<br></a>
              <a href="#Abstract">Abstract<br></a>
              <a href="#Required_Reading">Required_Reading<br></a>
              <a href="#Keywords">Keywords<br></a>
              <a href="#Brief_I/O">Brief_I/O<br></a>
              <a href="#Detailed_Input">Detailed_Input<br></a>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <a href="#Detailed_Output">Detailed_Output<br></a>
              <a href="#Parameters">Parameters<br></a>
              <a href="#Exceptions">Exceptions<br></a>
              <a href="#Files">Files<br></a>
              <a href="#Particulars">Particulars<br></a>
              <big><b><a href="#Examples">Examples<br></a></b></big>

              </td>
              <td style="vertical-align: top; width: 33%; text-align: center;">              <a href="#Restrictions">Restrictions<br></a>
              <a href="#Literature_References">Literature_References<br></a>
              <a href="#Author_and_Institution">Author_and_Institution<br></a>
              <a href="#Version">Version<br></a>
              <a href="#Index_Entries">Index_Entries<br></a>
            </td>
          </tr>
        </tbody>
</table>
<hr>

<h4><a name="Procedure">Procedure</a></h4>
<PRE>
   spkopa_c ( SPK open for addition ) 

   void spkopa_c ( ConstSpiceChar * file,
                   SpiceInt       * handle )

</PRE>
<h4><a name="Abstract">Abstract</a></h4>
<PRE>
   Open an existing SPK file for subsequent write.
</PRE>
<h4><a name="Required_Reading">Required_Reading</a></h4>
<PRE>
   <a href="../req/spk.html">SPK</a>
</PRE>
<h4><a name="Keywords">Keywords</a></h4>
<PRE>
   SPK


</PRE>
<h4><a name="Brief_I/O">Brief_I/O</a></h4>
<PRE>
   VARIABLE  I/O  DESCRIPTION
   --------  ---  --------------------------------------------------
   file       I   The name of an existing SPK file.
   handle     O   Handle attached to the SPK file opened to append.
</PRE>
<h4><a name="Detailed_Input">Detailed_Input</a></h4>
<PRE>
   file        is the name of an existing SPK file to which
               you wish to append additional SPK segments.
</PRE>
<h4><a name="Detailed_Output">Detailed_Output</a></h4>
<PRE>
   handle      is the DAF integer handle that refers to the SPK file
               opened for appending. `handle' is required by any of the
               SPK writing routines.
</PRE>
<h4><a name="Parameters">Parameters</a></h4>
<PRE>
   None.
</PRE>
<h4><a name="Exceptions">Exceptions</a></h4>
<PRE>
   If any of the following exceptions occur, `handle' will be returned
   with the value 0.

   1)  If the file specified does not exist, the error
       SPICE(FILENOTFOUND) is signaled by a routine in the call tree
       of this routine.

   2)  If the file specified is not an SPK file, the error
       SPICE(FILEISNOTSPK) is signaled by a routine in the call tree
       of this routine.

   3)  If the specified SPK file cannot be opened for writing, an
       error is signaled by a routine in the call tree of this
       routine.

   4)  If the specified SPK file uses a non-native binary file
       format, an error is signaled by a routine in the call tree of
       this routine.

   5)  If the specified SPK file is corrupted or otherwise invalid,
       an error is signaled by a routine in the call tree of this
       routine.

   6)  If the `file' input string pointer is null, the error
       SPICE(NULLPOINTER) is signaled.

   7)  If the `file' input string has zero length, the error
       SPICE(EMPTYSTRING) is signaled.
</PRE>
<h4><a name="Files">Files</a></h4>
<PRE>
   None.
</PRE>
<h4><a name="Particulars">Particulars</a></h4>
<PRE>
   This file provides an interface for opening existing SPK
   files for the addition of SPK segments. If you need
   to open an new SPK file for writing, call the routine <a href="spkopn_c.html">spkopn_c</a>.
</PRE>
<h4><a name="Examples">Examples</a></h4>
<PRE>
   The numerical results shown for this example may differ across
   platforms. The results depend on the SPICE kernels used as
   input, the compiler and supporting libraries, and the machine
   specific arithmetic implementation.

   1) This example demonstrates how to add a new segment to an
      SPK type 5 kernel.

      For this example, we will first create an SPK type 5 kernel
      containing only one segment, given a time-ordered set of
      discrete states and epochs, and the gravitational parameter
      of a central body.

      Then, we will reopen the SPK and add a second segment. The
      example below shows one set of calls that you could perform
      to make the addition. Obviously, there is no need to close
      and re-open the file in order to add multiple segments. It is
      done in this example to demonstrate the use of <b>spkopa_c</b>.

      Note that you could add segments of other data types by
      replacing the call to <a href="spkw05_c.html">spkw05_c</a> with a suitably modified call to
      another SPK writing routine.


      Example code begins here.


      /.
         Program spkopa_ex1
      ./
      #include &quot;SpiceUsr.h&quot;

      int main( )
      {

         /.
         Define the segment identifier parameters.
         ./
         #define SPK5         &quot;spkopa_ex1.bsp&quot;
         #define REF          &quot;J2000&quot;
         #define GMSUN        132712440023.310
         #define BODY         3
         #define CENTER       10
         #define NSTATS       9

         /.
         Local variables.
         ./
         SpiceChar          * ifname;
         SpiceChar          * segid;

         SpiceDouble          first;
         SpiceDouble          last;
         SpiceInt             handle;
         SpiceInt             ncomch;

         /.
         Define the states and epochs.
         ./
         SpiceDouble          states [NSTATS][6] = {
                                 {101.0, 201.0, 301.0, 401.0, 501.0, 601.0},
                                 {102.0, 202.0, 302.0, 402.0, 502.0, 602.0},
                                 {103.0, 203.0, 303.0, 403.0, 503.0, 603.0},
                                 {104.0, 204.0, 304.0, 404.0, 504.0, 604.0},
                                 {105.0, 205.0, 305.0, 405.0, 505.0, 605.0},
                                 {106.0, 206.0, 306.0, 406.0, 506.0, 606.0},
                                 {107.0, 207.0, 307.0, 407.0, 507.0, 607.0},
                                 {108.0, 208.0, 308.0, 408.0, 508.0, 608.0},
                                 {109.0, 209.0, 309.0, 409.0, 509.0, 609.0} };

         SpiceDouble          epoch1 [NSTATS] = { 100.0, 200.0, 300.0,
                                                  400.0, 500.0, 600.0,
                                                  700.0, 800.0, 900.0 };

         SpiceDouble          epoch2 [NSTATS] = { 1100.0, 1200.0, 1300.0,
                                                  1400.0, 1500.0, 1600.0,
                                                  1700.0, 1800.0, 1900.0 };

         /.
         Set the start and stop times of interval covered by
         the first segment.
         ./
         first  = epoch1[0];
         last   = epoch1[NSTATS-1];

         /.
         `ncomch' is the number of characters to reserve for the
         kernel's comment area. This example doesn't write
         comments, so set to zero.
         ./
         ncomch = 0;

         /.
         Internal file name and segment ID.
         ./
         ifname = &quot;Type 5 SPK internal file name.&quot;;
         segid  = &quot;SPK type 5 test segment #1&quot;;

         /.
         Open a new SPK file.
         ./
         <a href="spkopn_c.html">spkopn_c</a> ( SPK5, ifname, ncomch, &amp;handle );

         /.
         Write the segment.
         ./
         <a href="spkw05_c.html">spkw05_c</a> ( handle, BODY,  CENTER, REF,    first,  last,
                    segid,  GMSUN, NSTATS, states, epoch1 );

         /.
         Close the SPK file.
         ./
         <a href="spkcls_c.html">spkcls_c</a> ( handle );

         /.
         At this point we have an existing SPK type 5 kernel
         that contains a single segment. Let's now demonstrate
         the use of <b>spkopa_c</b>.

         Open the an existing SPK file for subsequent write.
         ./
         <b>spkopa_c</b> ( SPK5, &amp;handle );

         /.
         Set the start and stop times of interval covered by
         the second segment, and the segment ID.
         ./
         first  = epoch2[0];
         last   = epoch2[NSTATS-1];

         segid  = &quot;SPK type 5 test segment #2&quot;;

         /.
         Now write the second segment. Use the same set of
         states time-ordered set of discrete states and the
         gravitational parameter. Set the epochs to be `epoch2'.
         ./
         <a href="spkw05_c.html">spkw05_c</a> ( handle, BODY,  CENTER, REF,    first,  last,
                    segid,  GMSUN, NSTATS, states, epoch2 );

         /.
         Finally, close the file.
         ./
         <a href="spkcls_c.html">spkcls_c</a> ( handle );

         return ( 0 );
      }


      When this program is executed, no output is presented on
      screen. After run completion, a new SPK type 5, with two
      segments, exists in the output directory.
</PRE>
<h4><a name="Restrictions">Restrictions</a></h4>
<PRE>
   None.
</PRE>
<h4><a name="Literature_References">Literature_References</a></h4>
<PRE>
   None.
</PRE>
<h4><a name="Author_and_Institution">Author_and_Institution</a></h4>
<PRE>
   J. Diaz del Rio     (ODC Space)
   F.S. Turner         (JPL)
</PRE>
<h4><a name="Version">Version</a></h4>
<PRE>
   -CSPICE Version 1.0.1, 05-AUG-2021 (JDR)

       Edited the header to comply with NAIF standard. Added complete
       code example.

       Added entries #3 to #5 in -Exceptions section.

   -CSPICE Version 1.0.0, 16-MAR-1999 (FST)
</PRE>
<h4><a name="Index_Entries">Index_Entries</a></h4>
<PRE>
   Open an existing SPK file for adding segments
</PRE>
<h4>Link to routine spkopa_c source file <a href='../../../src/cspice/spkopa_c.c'>spkopa_c.c</a> </h4>

      </td>
    </tr>
  </tbody>
</table>

   <pre>Fri Dec 31 18:41:12 2021</pre>

</body>
</html>

